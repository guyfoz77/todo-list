(()=>{"use strict";let e=[];class t{constructor(e,t){this.name=e,this.projectIndex=t,this.todos=[]}static addNewTodo(t,o,d=""){const a={title:t,projectIndex:o,completed:!1,dueDate:d};e[o].todos.push(a)}static projectDeleter(t){e.splice(t,1)}static addNewProject(o,d){e.push(new t(o,d))}markTodoCompleteToggle(e){this.todos[e].completed=!this.todos[e].completed}todoDateEditor(e,t){this.todos[e].dueDate=t}todoDeleter(e){this.todos.splice(e,1)}}let o=0;const d=document.querySelector(".projectList"),a=document.querySelector(".newProjectButton"),c=document.querySelector(".newProjectInput"),n=document.querySelector(".projectList"),r=document.querySelector(".todoList"),l=document.querySelector(".newTodoButton"),s=document.querySelector(".newTodoInput"),i=document.querySelector(".newTodoDate"),u=document.querySelector(".deleteComplete");function p(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function m(e,t,o,d){const a=document.createElement(e);return""!=t&&("object"==typeof t?t.forEach((e=>{a.classList.add(e)})):a.classList.add(t)),""!=o&&(a.value=o,a.textContent=o),""!=d&&(a.dataset.element=d),a}function v(e){let t=m("div","projectCard",e,"");return t.addEventListener("click",(e=>{var t;t=e.target.dataset.projectID,o=t,h(),f(o)})),t}function h(){p(d);let t=[];for(let o=0;o<e.length;o++){let d=v(e[o].name);d.dataset.projectID=o,t.push(d)}t[o].classList.add("activeProject"),t.forEach((e=>{n.append(e)}))}function f(t){p(r);for(let o=0;o<e[t].todos.length;o++){let d=D(e[t].todos[o].title,e[t].todos[o].completed,e[t].todos[o].dueDate);d.dataset.projectID=t,d.dataset.todoID=o,r.append(d)}}function D(t,d,a){let c=m("div","todoCard","",""),n=m("div",["completeButton","material-symbols-outlined"],"","");n.addEventListener("click",(t=>{const d=t.target.parentNode.dataset.todoID;c.classList.toggle("complete"),n.classList.toggle("selected"),e[o].markTodoCompleteToggle(d)})),1==d&&(c.classList.add("complete"),n.classList.add("selected"));let r=m("h2","",t,""),l=m("div","dateHolder","",""),s=m("h3","","","");s.textContent=""==a?"No due date":`Due ${a}`,l.append(s);let i=m("input","","","");return i.setAttribute("type","date"),i.value=""==a?"":a,i.addEventListener("blur",(t=>{const o=t.target.parentNode.parentNode.dataset.projectID,d=t.target.parentNode.parentNode.dataset.todoID;let a=i.value;e[o].todoDateEditor(d,a),""!=a&&(s.textContent="",s.textContent=`Due ${a}`),l.removeChild(l.firstChild),l.append(s)})),s.addEventListener("click",(()=>{l.removeChild(l.firstChild),l.append(i),i.focus()})),c.append(n,r,l),c}function j(){h(),f(o)}a.addEventListener("click",(e=>{e.preventDefault(),""!=c.value&&(p(n),t.addNewProject(c.value),f(o),c.value="",h())})),l.addEventListener("click",(e=>{e.preventDefault(),""!=s.value&&(t.addNewTodo(s.value,o,i.value),j(),s.value="",i.value="")})),u.addEventListener("click",(t=>{t.preventDefault();for(let t=e[o].todos.length-1;t>=0;t--)1==e[o].todos[t].completed&&e[o].todoDeleter(t),j()})),t.addNewProject("test project",0),t.addNewTodo("Test todo",0),t.addNewTodo("another test todo",0),t.addNewProject("second test project",1),t.addNewTodo("second test todo",1),t.addNewTodo("Yet another thing to do",1),console.log(e),j()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q2hDTixFQUFRTSxXQUFXLG9CQUFxQixHQUN4Q04sRUFBUWMsY0FBYyxzQkFBdUIsR0FDN0NkLEVBQVFNLFdBQVcsbUJBQW9CLEdBQ3ZDTixFQUFRTSxXQUFXLDBCQUEyQixHQUM5Q3VFLFFBQVFDLElBQUkvRSxHQUlaNEUsRyIsInNvdXJjZXMiOlsid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9wcm9qZWN0U3RvcmFnZS5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvcHJvamVjdE1hbmFnZXIuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL2RvbUNvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL3BhZ2VMb2FkZXIuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBsZXQgcHJvamVjdHMgPSBbXTsiLCJpbXBvcnQgeyBwcm9qZWN0cyB9IGZyb20gXCIuL3Byb2plY3RTdG9yYWdlXCI7XG5cbmV4cG9ydCBjbGFzcyBQcm9qZWN0IHtcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBwcm9qZWN0SW5kZXgpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5wcm9qZWN0SW5kZXggPSBwcm9qZWN0SW5kZXg7XG4gICAgICAgIHRoaXMudG9kb3MgPSBbXTtcbiAgICB9XG5cbiAgICBzdGF0aWMgYWRkTmV3VG9kbyh0aXRsZSwgcHJvamVjdEluZGV4LCBkdWVEYXRlID0gJycpIHtcbiAgICAgICAgY29uc3QgdG9kbyA9IHtcbiAgICAgICAgICAgIHRpdGxlOiB0aXRsZSxcbiAgICAgICAgICAgIHByb2plY3RJbmRleDogcHJvamVjdEluZGV4LFxuICAgICAgICAgICAgLy8gdG9kb0luZGV4OiB0b2RvSW5kZXgsXG4gICAgICAgICAgICBjb21wbGV0ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgZHVlRGF0ZTogZHVlRGF0ZVxuICAgICAgICB9XG4gICAgICAgIHByb2plY3RzW3Byb2plY3RJbmRleF0udG9kb3MucHVzaCh0b2RvKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgcHJvamVjdERlbGV0ZXIocHJvamVjdEluZGV4KSB7XG4gICAgICAgIHByb2plY3RzLnNwbGljZShwcm9qZWN0SW5kZXgsIDEpO1xuICAgIH1cblxuICAgIHN0YXRpYyBhZGROZXdQcm9qZWN0KG5hbWUsIHByb2plY3RJbmRleCkge1xuICAgICAgICBwcm9qZWN0cy5wdXNoKG5ldyBQcm9qZWN0KG5hbWUsIHByb2plY3RJbmRleCkpO1xuICAgIH1cblxuICAgIG1hcmtUb2RvQ29tcGxldGVUb2dnbGUodG9kb0luZGV4KSB7XG4gICAgICAgIHRoaXMudG9kb3NbdG9kb0luZGV4XS5jb21wbGV0ZWQgPSAhdGhpcy50b2Rvc1t0b2RvSW5kZXhdLmNvbXBsZXRlZDtcbiAgICB9XG5cbiAgICB0b2RvRGF0ZUVkaXRvcih0b2RvSW5kZXgsIG5ld0RhdGUpIHtcbiAgICAgICAgdGhpcy50b2Rvc1t0b2RvSW5kZXhdLmR1ZURhdGUgPSBuZXdEYXRlO1xuICAgIH1cblxuICAgIHRvZG9EZWxldGVyKHRvZG9JbmRleCkge1xuICAgICAgICB0aGlzLnRvZG9zLnNwbGljZSh0b2RvSW5kZXgsIDEpO1xuICAgIH1cbn1cblxuLy8gZnVuY3Rpb24gcHJvamVjdEJ1aWxkZXIobmFtZSwgcHJvamVjdEluZGV4KSB7IC8vZmFjdG9yeSBmdW5jdGlvbiB0byBidWlsZCBuZXcgcHJvamVjdCBvYmplY3QuXG4vLyAgICAgbGV0IHRvZG9zID0gW107XG4vLyAgICAgZnVuY3Rpb24gdG9kb0RhdGVFZGl0b3IodG9kb0luZGV4LCBuZXdEYXRlKSB7XG4vLyAgICAgICAgIHRoaXMudG9kb3NbdG9kb0luZGV4XS5kdWVEYXRlID0gbmV3RGF0ZTtcbi8vICAgICB9XG4vLyAgICAgZnVuY3Rpb24gdG9kb0RlbGV0ZXIodG9kb0lEKXtcbi8vICAgICAgICAgdGhpcy50b2Rvcy5zcGxpY2UodG9kb0lELCAxKTtcbi8vICAgICB9XG4vLyAgICAgcmV0dXJuIHtcbi8vICAgICAgICAgbmFtZTogbmFtZSxcbi8vICAgICAgICAgcHJvamVjdEluZGV4OiBwcm9qZWN0SW5kZXgsXG4vLyAgICAgICAgIHRvZG9zOiB0b2Rvcyxcbi8vICAgICAgICAgdG9kb0RhdGVFZGl0b3I6IHRvZG9EYXRlRWRpdG9yLFxuLy8gICAgICAgICB0b2RvRGVsZXRlcjogdG9kb0RlbGV0ZXJcbi8vICAgICB9XG4vLyB9XG4vLyBmdW5jdGlvbiB0b2RvQnVpbGRlcih0aXRsZSwgcHJvamVjdEluZGV4LCB0b2RvSW5kZXgsIGR1ZURhdGUgPSAnTm8gZHVlIGRhdGUuJykgeyAvL3Byb2plY3RJbmRleCByZWZlcnMgdG8gdGhlIHBvc2l0aW9uIG9mIHRoZSBwYXJlbnQgcHJvamVjdCBpbiB0aGUgYXJyYXkgb2YgcHJvamVjdHMuXG4vLyAgICAgcmV0dXJuIHtcbi8vICAgICAgICAgdGl0bGU6IHRpdGxlLFxuLy8gICAgICAgICBwcm9qZWN0SW5kZXg6IHByb2plY3RJbmRleCxcbi8vICAgICAgICAgdG9kb0luZGV4OiB0b2RvSW5kZXgsXG4vLyAgICAgICAgIGNvbXBsZXRlZDogZmFsc2UsXG4vLyAgICAgICAgIGR1ZURhdGU6IGR1ZURhdGVcbi8vICAgICB9XG4vLyB9XG4vLyBleHBvcnQgZnVuY3Rpb24gcHJvamVjdERlbGV0ZXIocHJvamVjdEluZGV4KSB7XG4vLyAgICAgUHJvamVjdC5wcm9qZWN0cy5zcGxpY2UocHJvamVjdEluZGV4LCAxKTtcbi8vIH1cblxuLy8gZXhwb3J0IGZ1bmN0aW9uIGFkZE5ld1Byb2plY3QobmFtZSwgcHJvamVjdEluZGV4KSB7XG4vLyAgICAgcHJvamVjdHMucHVzaChuZXcgUHJvamVjdChuYW1lLCBwcm9qZWN0SW5kZXgpKTtcbi8vIH1cbi8vIGV4cG9ydCBmdW5jdGlvbiBhZGROZXdUb2RvKHRpdGxlLCBwcm9qZWN0SW5kZXgsIHRvZG9JbmRleCwgZHVlRGF0ZSA9ICdObyBkdWUgZGF0ZS4nKSB7XG4vLyAgICAgUHJvamVjdC5wcm9qZWN0c1twcm9qZWN0SW5kZXhdLnRvZG9zLnB1c2godG9kb0J1aWxkZXIodGl0bGUsIHByb2plY3RJbmRleCwgdG9kb0luZGV4LCBkdWVEYXRlKSk7XG4vLyB9IiwiaW1wb3J0IHsgUHJvamVjdCB9IGZyb20gXCIuL3Byb2plY3RNYW5hZ2VyXCI7XG5pbXBvcnQgeyBwcm9qZWN0cyB9IGZyb20gXCIuL3Byb2plY3RTdG9yYWdlXCI7XG5pbXBvcnQgeyBwYWdlTG9hZGVyIH0gZnJvbSBcIi4vcGFnZUxvYWRlclwiO1xuXG5leHBvcnQgbGV0IGFjdGl2ZVByb2plY3RJbmRleCA9IDA7XG5cbmNvbnN0IHByb2plY3RMaXN0Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3RMaXN0Jyk7XG5jb25zdCBuZXdQcm9qZWN0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5ld1Byb2plY3RCdXR0b24nKTtcbiAgICBjb25zdCBwcm9qZWN0SW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmV3UHJvamVjdElucHV0Jyk7XG5jb25zdCBwcm9qZWN0TGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0TGlzdCcpO1xuY29uc3QgdG9kb0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b2RvTGlzdCcpO1xuY29uc3QgbmV3VG9kb0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uZXdUb2RvQnV0dG9uJyk7XG4gICAgY29uc3QgbmV3VG9kb0lucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5ld1RvZG9JbnB1dCcpO1xuICAgIGNvbnN0IG5ld1RvZG9EYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5ld1RvZG9EYXRlJyk7XG5jb25zdCBkZWxldGVBbGxDb21wbGV0ZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kZWxldGVDb21wbGV0ZScpO1xuXG5uZXdQcm9qZWN0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7IC8vd2lsbCBuZWVkIHRvIHJld29yayB0aGlzIHRvIGFkZCB0byBzdG9yYWdlIGFycmF5IHJhdGhlciB0aGFuIGRpcmVjdGx5IHRvIERPTVxuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBpZiAocHJvamVjdElucHV0LnZhbHVlID09ICcnKSByZXR1cm47XG4gICAgY2xlYXJFbGVtZW50KHByb2plY3RMaXN0KTtcbiAgICBQcm9qZWN0LmFkZE5ld1Byb2plY3QocHJvamVjdElucHV0LnZhbHVlKTtcbiAgICB0b2RvTGlzdEJ1aWxkZXIoYWN0aXZlUHJvamVjdEluZGV4KTtcbiAgICBwcm9qZWN0SW5wdXQudmFsdWUgPSAnJztcbiAgICBwcm9qZWN0TGlzdEJ1aWxkZXIoKTtcbn0pXG5uZXdUb2RvQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGlmIChuZXdUb2RvSW5wdXQudmFsdWUgPT0gJycpIHJldHVybjtcbiAgICBQcm9qZWN0LmFkZE5ld1RvZG8obmV3VG9kb0lucHV0LnZhbHVlLCBhY3RpdmVQcm9qZWN0SW5kZXgsIG5ld1RvZG9EYXRlLnZhbHVlKTtcbiAgICBwYWdlTG9hZGVyKCk7XG4gICAgbmV3VG9kb0lucHV0LnZhbHVlID0gJyc7XG4gICAgbmV3VG9kb0RhdGUudmFsdWUgPSAnJztcbn0pXG5kZWxldGVBbGxDb21wbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBmb3IgKGxldCBpID0gcHJvamVjdHNbYWN0aXZlUHJvamVjdEluZGV4XS50b2Rvcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICBpZiAocHJvamVjdHNbYWN0aXZlUHJvamVjdEluZGV4XS50b2Rvc1tpXS5jb21wbGV0ZWQgPT0gdHJ1ZSkge1xuICAgICAgICAgICAgcHJvamVjdHNbYWN0aXZlUHJvamVjdEluZGV4XS50b2RvRGVsZXRlcihpKTtcbiAgICAgICAgfVxuICAgICAgICBwYWdlTG9hZGVyKCk7XG4gICAgfVxufSlcblxuXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJFbGVtZW50KGVsZW1lbnQpIHtcbiAgICB3aGlsZSAoZWxlbWVudC5maXJzdENoaWxkKSB7XG4gICAgICAgIGVsZW1lbnQucmVtb3ZlQ2hpbGQoZWxlbWVudC5maXJzdENoaWxkKTtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlbGVtZW50QnVpbGRlcihlbGVtZW50LCBjbGFzc0xpc3QsIHRleHRDb250ZW50LCBkYXRhTmFtZSkgeyAgLy9lbGVtZW50IGJ1aWxkZXIgY29waWVkIGFuZCBtb2RpZmllZCBmcm9tIHByZXZpb3VzIHByb2plY3QuXG4gICAgY29uc3QgeGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGVsZW1lbnQpO1xuICAgIGlmIChjbGFzc0xpc3QgIT0gJycpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGFzc0xpc3QgPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGNsYXNzTGlzdC5mb3JFYWNoKGNsYXNzTGFiZWwgPT4ge1xuICAgICAgICAgICAgICAgIHhlbGVtZW50LmNsYXNzTGlzdC5hZGQoY2xhc3NMYWJlbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHhlbGVtZW50LmNsYXNzTGlzdC5hZGQoY2xhc3NMaXN0KTtcbiAgICB9XG4gICAgaWYgKHRleHRDb250ZW50ICE9ICcnKSB7XG4gICAgICAgIHhlbGVtZW50LnZhbHVlID0gdGV4dENvbnRlbnQ7XG4gICAgICAgIHhlbGVtZW50LnRleHRDb250ZW50ID0gdGV4dENvbnRlbnQ7XG4gICAgfVxuICAgIGlmIChkYXRhTmFtZSAhPSAnJykgeGVsZW1lbnQuZGF0YXNldC5lbGVtZW50ID0gZGF0YU5hbWU7XG4gICAgcmV0dXJuIHhlbGVtZW50O1xufVxuXG5mdW5jdGlvbiBwcm9qZWN0Q2FyZEJ1aWxkZXIobmFtZSkge1xuICAgIGxldCBwcm9qZWN0Q2FyZCA9IGVsZW1lbnRCdWlsZGVyKCdkaXYnLCAncHJvamVjdENhcmQnLCBuYW1lLCAnJyk7XG4gICAgcHJvamVjdENhcmQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICAgICAgYWN0aXZlUHJvamVjdFN3aXRjaGVyKGUudGFyZ2V0LmRhdGFzZXQucHJvamVjdElEKTtcbiAgICB9KVxuICAgIHJldHVybiBwcm9qZWN0Q2FyZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHByb2plY3RMaXN0QnVpbGRlcigpIHtcbiAgICBjbGVhckVsZW1lbnQocHJvamVjdExpc3RDb250YWluZXIpO1xuICAgIGxldCBwcm9qZWN0Q2FyZHMgPSBbXVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvamVjdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IG5ld1Byb2plY3RDYXJkID0gcHJvamVjdENhcmRCdWlsZGVyKHByb2plY3RzW2ldLm5hbWUpO1xuICAgICAgICBuZXdQcm9qZWN0Q2FyZC5kYXRhc2V0LnByb2plY3RJRCA9IGk7XG4gICAgICAgIHByb2plY3RDYXJkcy5wdXNoKG5ld1Byb2plY3RDYXJkKTtcbiAgICB9XG4gICAgcHJvamVjdENhcmRzW2FjdGl2ZVByb2plY3RJbmRleF0uY2xhc3NMaXN0LmFkZCgnYWN0aXZlUHJvamVjdCcpO1xuICAgIHByb2plY3RDYXJkcy5mb3JFYWNoKHByb2plY3RDYXJkID0+IHtcbiAgICAgICAgcHJvamVjdExpc3QuYXBwZW5kKHByb2plY3RDYXJkKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gYWN0aXZlUHJvamVjdFN3aXRjaGVyKG5ld1Byb2plY3RJbmRleCkge1xuICAgIGFjdGl2ZVByb2plY3RJbmRleCA9IG5ld1Byb2plY3RJbmRleDtcbiAgICBwcm9qZWN0TGlzdEJ1aWxkZXIoKTtcbiAgICB0b2RvTGlzdEJ1aWxkZXIoYWN0aXZlUHJvamVjdEluZGV4KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRvZG9MaXN0QnVpbGRlcihhY3RpdmVQcm9qZWN0SW5kZXgpIHtcbiAgICBjbGVhckVsZW1lbnQodG9kb0NvbnRhaW5lcik7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcm9qZWN0c1thY3RpdmVQcm9qZWN0SW5kZXhdLnRvZG9zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBuZXdUb2RvQ2FyZCA9IHRvZG9DYXJkQnVpbGRlcihwcm9qZWN0c1thY3RpdmVQcm9qZWN0SW5kZXhdLnRvZG9zW2ldLnRpdGxlLCBwcm9qZWN0c1thY3RpdmVQcm9qZWN0SW5kZXhdLnRvZG9zW2ldLmNvbXBsZXRlZCwgcHJvamVjdHNbYWN0aXZlUHJvamVjdEluZGV4XS50b2Rvc1tpXS5kdWVEYXRlKTtcbiAgICAgICAgbmV3VG9kb0NhcmQuZGF0YXNldC5wcm9qZWN0SUQgPSBhY3RpdmVQcm9qZWN0SW5kZXg7XG4gICAgICAgIG5ld1RvZG9DYXJkLmRhdGFzZXQudG9kb0lEID0gaTtcbiAgICAgICAgdG9kb0NvbnRhaW5lci5hcHBlbmQobmV3VG9kb0NhcmQpO1xuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRvZG9DYXJkQnVpbGRlcih0aXRsZSwgY29tcGxldGVkLCBkdWVEYXRlKSB7IFxuICAgIGxldCB0b2RvQ2FyZCA9IGVsZW1lbnRCdWlsZGVyKCdkaXYnLCAndG9kb0NhcmQnLCAnJywgJycpO1xuICAgIGxldCBjb21wbGV0ZSA9IGVsZW1lbnRCdWlsZGVyKCdkaXYnLCBbJ2NvbXBsZXRlQnV0dG9uJywgJ21hdGVyaWFsLXN5bWJvbHMtb3V0bGluZWQnXSwgJycsICcnKTtcbiAgICAgICAgY29tcGxldGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdG9kb0lEID0gZS50YXJnZXQucGFyZW50Tm9kZS5kYXRhc2V0LnRvZG9JRDtcbiAgICAgICAgICAgIHRvZG9DYXJkLmNsYXNzTGlzdC50b2dnbGUoJ2NvbXBsZXRlJyk7XG4gICAgICAgICAgICBjb21wbGV0ZS5jbGFzc0xpc3QudG9nZ2xlKCdzZWxlY3RlZCcpO1xuICAgICAgICAgICAgLy8gaWYgKGNvbXBsZXRlLnRleHRDb250ZW50ID09ICcnKSBjb21wbGV0ZS50ZXh0Q29udGVudCA9ICcnOyBlbHNlIGNvbXBsZXRlLnRleHRDb250ZW50ID0gJyc7XG4gICAgICAgICAgICBwcm9qZWN0c1thY3RpdmVQcm9qZWN0SW5kZXhdLm1hcmtUb2RvQ29tcGxldGVUb2dnbGUodG9kb0lEKTtcbiAgICAgICAgfSlcbiAgICAgICAgaWYgKGNvbXBsZXRlZCA9PSB0cnVlKSB7XG4gICAgICAgICAgICB0b2RvQ2FyZC5jbGFzc0xpc3QuYWRkKCdjb21wbGV0ZScpO1xuICAgICAgICAgICAgY29tcGxldGUuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTtcbiAgICAgICAgfVxuICAgIGxldCB0b2RvVGl0bGUgPSBlbGVtZW50QnVpbGRlcignaDInLCAnJywgdGl0bGUsICcnKTtcbiAgICBsZXQgdG9kb0RhdGVIb2xkZXIgPSBlbGVtZW50QnVpbGRlcignZGl2JywgJ2RhdGVIb2xkZXInLCAnJywgJycpO1xuICAgIGxldCB0b2RvRHVlRGF0ZSA9IGVsZW1lbnRCdWlsZGVyKCdoMycsICcnLCAnJywgJycpO1xuICAgICAgICBpZiAoZHVlRGF0ZSA9PSAnJykgdG9kb0R1ZURhdGUudGV4dENvbnRlbnQgPSAnTm8gZHVlIGRhdGUnOyBlbHNlIHRvZG9EdWVEYXRlLnRleHRDb250ZW50ID0gYER1ZSAke2R1ZURhdGV9YDtcbiAgICB0b2RvRGF0ZUhvbGRlci5hcHBlbmQodG9kb0R1ZURhdGUpO1xuICAgIGxldCB0b2RvRHVlRGF0ZVBpY2tlciA9IGVsZW1lbnRCdWlsZGVyKCdpbnB1dCcsICcnLCAnJywgJycpO1xuICAgICAgICB0b2RvRHVlRGF0ZVBpY2tlci5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwiZGF0ZVwiKTtcbiAgICAgICAgaWYgKGR1ZURhdGUgPT0gJycpIHRvZG9EdWVEYXRlUGlja2VyLnZhbHVlID0gJyc7IGVsc2UgdG9kb0R1ZURhdGVQaWNrZXIudmFsdWUgPSBkdWVEYXRlO1xuICAgICAgICAgICAgdG9kb0R1ZURhdGVQaWNrZXIuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJvamVjdElEID0gZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLmRhdGFzZXQucHJvamVjdElEO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvZG9JRCA9IGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5kYXRhc2V0LnRvZG9JRDtcbiAgICAgICAgICAgICAgICBsZXQgbmV3RHVlRGF0ZSA9IHRvZG9EdWVEYXRlUGlja2VyLnZhbHVlO1xuICAgICAgICAgICAgICAgIHByb2plY3RzW3Byb2plY3RJRF0udG9kb0RhdGVFZGl0b3IodG9kb0lELCBuZXdEdWVEYXRlKTtcbiAgICAgICAgICAgICAgICBpZiAobmV3RHVlRGF0ZSAhPSAnJykge1xuICAgICAgICAgICAgICAgICAgICB0b2RvRHVlRGF0ZS50ZXh0Q29udGVudCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB0b2RvRHVlRGF0ZS50ZXh0Q29udGVudCA9IGBEdWUgJHtuZXdEdWVEYXRlfWBcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRvZG9EYXRlSG9sZGVyLnJlbW92ZUNoaWxkKHRvZG9EYXRlSG9sZGVyLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgICAgIHRvZG9EYXRlSG9sZGVyLmFwcGVuZCh0b2RvRHVlRGF0ZSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB0b2RvRHVlRGF0ZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRvZG9EYXRlSG9sZGVyLnJlbW92ZUNoaWxkKHRvZG9EYXRlSG9sZGVyLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgdG9kb0RhdGVIb2xkZXIuYXBwZW5kKHRvZG9EdWVEYXRlUGlja2VyKTtcbiAgICAgICAgICAgIHRvZG9EdWVEYXRlUGlja2VyLmZvY3VzKCk7XG4gICAgICAgIH0pXG4gICAgICAgIFxuXG4gICAgdG9kb0NhcmQuYXBwZW5kKGNvbXBsZXRlLCB0b2RvVGl0bGUsIHRvZG9EYXRlSG9sZGVyKTtcbiAgICByZXR1cm4gdG9kb0NhcmQ7XG59XG4iLCJcbmltcG9ydCB7IHRvZG9MaXN0QnVpbGRlciwgcHJvamVjdExpc3RCdWlsZGVyIH0gZnJvbSBcIi4vZG9tQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgYWN0aXZlUHJvamVjdEluZGV4IH0gZnJvbSBcIi4vZG9tQ29udHJvbGxlclwiO1xuXG5leHBvcnQgZnVuY3Rpb24gcGFnZUxvYWRlcigpIHtcbiAgICBwcm9qZWN0TGlzdEJ1aWxkZXIoKTtcbiAgICB0b2RvTGlzdEJ1aWxkZXIoYWN0aXZlUHJvamVjdEluZGV4KTtcbn0iLCJpbXBvcnQgeyBQcm9qZWN0IH0gZnJvbSBcIi4vcHJvamVjdE1hbmFnZXJcIjtcbmltcG9ydCB7IHBhZ2VMb2FkZXIgfSBmcm9tIFwiLi9wYWdlTG9hZGVyXCI7XG5pbXBvcnQgeyBwcm9qZWN0cyB9IGZyb20gXCIuL3Byb2plY3RTdG9yYWdlXCI7XG5cblByb2plY3QuYWRkTmV3UHJvamVjdCgndGVzdCBwcm9qZWN0JywgMCk7XG5Qcm9qZWN0LmFkZE5ld1RvZG8oJ1Rlc3QgdG9kbycsIDApO1xuUHJvamVjdC5hZGROZXdUb2RvKCdhbm90aGVyIHRlc3QgdG9kbycsIDApO1xuUHJvamVjdC5hZGROZXdQcm9qZWN0KCdzZWNvbmQgdGVzdCBwcm9qZWN0JywgMSk7XG5Qcm9qZWN0LmFkZE5ld1RvZG8oJ3NlY29uZCB0ZXN0IHRvZG8nLCAxKTtcblByb2plY3QuYWRkTmV3VG9kbygnWWV0IGFub3RoZXIgdGhpbmcgdG8gZG8nLCAxKTtcbmNvbnNvbGUubG9nKHByb2plY3RzKTtcblxuXG5cbnBhZ2VMb2FkZXIoKTtcbiJdLCJuYW1lcyI6WyJwcm9qZWN0cyIsIlByb2plY3QiLCJjb25zdHJ1Y3RvciIsIm5hbWUiLCJwcm9qZWN0SW5kZXgiLCJ0aGlzIiwidG9kb3MiLCJhZGROZXdUb2RvIiwidGl0bGUiLCJkdWVEYXRlIiwidG9kbyIsImNvbXBsZXRlZCIsInB1c2giLCJwcm9qZWN0RGVsZXRlciIsInNwbGljZSIsImFkZE5ld1Byb2plY3QiLCJtYXJrVG9kb0NvbXBsZXRlVG9nZ2xlIiwidG9kb0luZGV4IiwidG9kb0RhdGVFZGl0b3IiLCJuZXdEYXRlIiwidG9kb0RlbGV0ZXIiLCJhY3RpdmVQcm9qZWN0SW5kZXgiLCJwcm9qZWN0TGlzdENvbnRhaW5lciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIm5ld1Byb2plY3RCdXR0b24iLCJwcm9qZWN0SW5wdXQiLCJwcm9qZWN0TGlzdCIsInRvZG9Db250YWluZXIiLCJuZXdUb2RvQnV0dG9uIiwibmV3VG9kb0lucHV0IiwibmV3VG9kb0RhdGUiLCJkZWxldGVBbGxDb21wbGV0ZUJ1dHRvbiIsImNsZWFyRWxlbWVudCIsImVsZW1lbnQiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJlbGVtZW50QnVpbGRlciIsImNsYXNzTGlzdCIsInRleHRDb250ZW50IiwiZGF0YU5hbWUiLCJ4ZWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJmb3JFYWNoIiwiY2xhc3NMYWJlbCIsImFkZCIsInZhbHVlIiwiZGF0YXNldCIsInByb2plY3RDYXJkQnVpbGRlciIsInByb2plY3RDYXJkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJuZXdQcm9qZWN0SW5kZXgiLCJ0YXJnZXQiLCJwcm9qZWN0SUQiLCJwcm9qZWN0TGlzdEJ1aWxkZXIiLCJ0b2RvTGlzdEJ1aWxkZXIiLCJwcm9qZWN0Q2FyZHMiLCJpIiwibGVuZ3RoIiwibmV3UHJvamVjdENhcmQiLCJhcHBlbmQiLCJuZXdUb2RvQ2FyZCIsInRvZG9DYXJkQnVpbGRlciIsInRvZG9JRCIsInRvZG9DYXJkIiwiY29tcGxldGUiLCJwYXJlbnROb2RlIiwidG9nZ2xlIiwidG9kb1RpdGxlIiwidG9kb0RhdGVIb2xkZXIiLCJ0b2RvRHVlRGF0ZSIsInRvZG9EdWVEYXRlUGlja2VyIiwic2V0QXR0cmlidXRlIiwibmV3RHVlRGF0ZSIsImZvY3VzIiwicGFnZUxvYWRlciIsInByZXZlbnREZWZhdWx0IiwiY29uc29sZSIsImxvZyJdLCJzb3VyY2VSb290IjoiIn0=