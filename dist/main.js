(()=>{"use strict";let e=[];class t{constructor(e,t){this.name=e,this.projectIndex=t,this.todos=[]}static addNewTodo(t,o,d=""){const n={title:t,projectIndex:o,completed:!1,dueDate:d};e[o].todos.push(n)}static projectDeleter(t){e.splice(t,1)}static addNewProject(o,d){e.push(new t(o,d))}markTodoCompleteToggle(e){this.todos[e].completed=!this.todos[e].completed}todoDateEditor(e,t){this.todos[e].dueDate=t}todoDeleter(e){this.todos.splice(e,1)}}let o=0;const d=document.querySelector(".projectList"),n=document.querySelector(".newProjectButton"),r=document.querySelector(".newProjectInput"),a=document.querySelector(".projectList"),c=document.querySelector(".todoList"),l=document.querySelector(".newTodoButton"),s=document.querySelector(".newTodoInput"),i=document.querySelector(".newTodoDate"),u=document.querySelector(".deleteComplete");function p(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function m(e,t,o,d){const n=document.createElement(e);return""!=t&&("object"==typeof t?t.forEach((e=>{n.classList.add(e)})):n.classList.add(t)),""!=o&&(n.value=o,n.textContent=o),""!=d&&(n.dataset.element=d),n}function v(e){let t=m("div","projectCard",e,"");return t.addEventListener("click",(e=>{var t;t=e.target.dataset.projectID,o=t,h(o)})),t}function h(t){p(c);for(let o=0;o<e[t].todos.length;o++){let d=f(e[t].todos[o].title,e[t].todos[o].dueDate);d.dataset.projectID=t,d.dataset.todoID=o,c.append(d)}}function f(t,d){let n=m("div","todoCard","",""),r=m("div","completeButton","","");r.addEventListener("click",(t=>{const d=t.target.parentNode.dataset.todoID;n.classList.toggle("complete"),""==r.textContent?r.textContent="x":r.textContent="",e[o].markTodoCompleteToggle(d),console.log(e)}));let a=m("h2","",t,""),c=m("div","dateHolder","",""),l=m("h3","","","");l.textContent=""==d?"No due date":`Due ${d}`,c.append(l);let s=m("input","","","");return s.setAttribute("type","date"),s.value=""==d?"":d,s.addEventListener("blur",(t=>{const o=t.target.parentNode.parentNode.dataset.projectID,d=t.target.parentNode.parentNode.dataset.todoID;let n=s.value;e[o].todoDateEditor(d,n),""!=n&&(l.textContent="",l.textContent=`Due ${n}`),c.removeChild(c.firstChild),c.append(l)})),l.addEventListener("click",(()=>{c.removeChild(c.firstChild),c.append(s),s.focus()})),n.append(r,a,c),n}function D(){!function(){p(d);for(let t=0;t<e.length;t++){let o=v(e[t].name);o.dataset.projectID=t,d.append(o)}}(),h(o)}n.addEventListener("click",(e=>{e.preventDefault(),""!=r.value&&(p(a),t.addNewProject(r.value),D(),r.value="")})),l.addEventListener("click",(e=>{e.preventDefault(),t.addNewTodo(s.value,o,i.value),D(),s.value="",i.value=""})),u.addEventListener("click",(t=>{t.preventDefault();for(let t=e[o].todos.length-1;t>=0;t--)1==e[o].todos[t].completed&&e[o].todoDeleter(t),D()})),t.addNewProject("test project",0),t.addNewTodo("Test todo",0),t.addNewTodo("another test todo",0),t.addNewProject("second test project",1),t.addNewTodo("second test todo",1),t.addNewTodo("Yet another thing to do",1),console.log(e),D()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LElBQUlrQyxFQUFJLEVBQUdBLEVBQUl4RCxFQUFTeUQsT0FBUUQsSUFBSyxDQUN0QyxJQUFJb0IsRUFBaUI1QixFQUFtQmhELEVBQVN3RCxHQUFHckQsTUFDcER5RSxFQUFlN0IsUUFBUU8sVUFBWUUsRUFDbkNsQyxFQUFxQnVDLE9BQU9lLEVBQ2hDLENBQ0osQ0MzRUlDLEdBQ0F0QixFQUFnQmxDLEVBQ3BCLENEU0FJLEVBQWlCeUIsaUJBQWlCLFNBQVNDLElBQ3ZDQSxFQUFFMkIsaUJBQ3dCLElBQXRCcEQsRUFBYW9CLFFBQ2pCYixFQUFhTixHQUNiMUIsRUFBUWMsY0FBY1csRUFBYW9CLE9BQ25DNkIsSUFDQWpELEVBQWFvQixNQUFRLEdBQUUsSUFFM0JqQixFQUFjcUIsaUJBQWlCLFNBQVNDLElBQ3BDQSxFQUFFMkIsaUJBQ0Y3RSxFQUFRTSxXQUFXdUIsRUFBYWdCLE1BQU96QixFQUFvQlUsRUFBWWUsT0FDdkU2QixJQUNBN0MsRUFBYWdCLE1BQVEsR0FDckJmLEVBQVllLE1BQVEsRUFBRSxJQUUxQmQsRUFBd0JrQixpQkFBaUIsU0FBU0MsSUFDOUNBLEVBQUUyQixpQkFDRixJQUFLLElBQUl0QixFQUFJeEQsRUFBU3FCLEdBQW9CZixNQUFNbUQsT0FBUyxFQUFHRCxHQUFLLEVBQUdBLElBQ1QsR0FBbkR4RCxFQUFTcUIsR0FBb0JmLE1BQU1rRCxHQUFHN0MsV0FDdENYLEVBQVNxQixHQUFvQkQsWUFBWW9DLEdBRTdDbUIsR0FDSixJRWxDSjFFLEVBQVFjLGNBQWMsZUFBZ0IsR0FDdENkLEVBQVFNLFdBQVcsWUFBYSxHQUNoQ04sRUFBUU0sV0FBVyxvQkFBcUIsR0FDeENOLEVBQVFjLGNBQWMsc0JBQXVCLEdBQzdDZCxFQUFRTSxXQUFXLG1CQUFvQixHQUN2Q04sRUFBUU0sV0FBVywwQkFBMkIsR0FDOUMyRCxRQUFRQyxJQUFJbkUsR0FJWjJFLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvcHJvamVjdFN0b3JhZ2UuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL3Byb2plY3RNYW5hZ2VyLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9kb21Db250cm9sbGVyLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9wYWdlTG9hZGVyLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgbGV0IHByb2plY3RzID0gW107IiwiaW1wb3J0IHsgcHJvamVjdHMgfSBmcm9tIFwiLi9wcm9qZWN0U3RvcmFnZVwiO1xuXG5leHBvcnQgY2xhc3MgUHJvamVjdCB7XG4gICAgY29uc3RydWN0b3IobmFtZSwgcHJvamVjdEluZGV4KSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMucHJvamVjdEluZGV4ID0gcHJvamVjdEluZGV4O1xuICAgICAgICB0aGlzLnRvZG9zID0gW107XG4gICAgfVxuXG4gICAgc3RhdGljIGFkZE5ld1RvZG8odGl0bGUsIHByb2plY3RJbmRleCwgZHVlRGF0ZSA9ICcnKSB7XG4gICAgICAgIGNvbnN0IHRvZG8gPSB7XG4gICAgICAgICAgICB0aXRsZTogdGl0bGUsXG4gICAgICAgICAgICBwcm9qZWN0SW5kZXg6IHByb2plY3RJbmRleCxcbiAgICAgICAgICAgIC8vIHRvZG9JbmRleDogdG9kb0luZGV4LFxuICAgICAgICAgICAgY29tcGxldGVkOiBmYWxzZSxcbiAgICAgICAgICAgIGR1ZURhdGU6IGR1ZURhdGVcbiAgICAgICAgfVxuICAgICAgICBwcm9qZWN0c1twcm9qZWN0SW5kZXhdLnRvZG9zLnB1c2godG9kbyk7XG4gICAgfVxuXG4gICAgc3RhdGljIHByb2plY3REZWxldGVyKHByb2plY3RJbmRleCkge1xuICAgICAgICBwcm9qZWN0cy5zcGxpY2UocHJvamVjdEluZGV4LCAxKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgYWRkTmV3UHJvamVjdChuYW1lLCBwcm9qZWN0SW5kZXgpIHtcbiAgICAgICAgcHJvamVjdHMucHVzaChuZXcgUHJvamVjdChuYW1lLCBwcm9qZWN0SW5kZXgpKTtcbiAgICB9XG5cbiAgICBtYXJrVG9kb0NvbXBsZXRlVG9nZ2xlKHRvZG9JbmRleCkge1xuICAgICAgICB0aGlzLnRvZG9zW3RvZG9JbmRleF0uY29tcGxldGVkID0gIXRoaXMudG9kb3NbdG9kb0luZGV4XS5jb21wbGV0ZWQ7XG4gICAgfVxuXG4gICAgdG9kb0RhdGVFZGl0b3IodG9kb0luZGV4LCBuZXdEYXRlKSB7XG4gICAgICAgIHRoaXMudG9kb3NbdG9kb0luZGV4XS5kdWVEYXRlID0gbmV3RGF0ZTtcbiAgICB9XG5cbiAgICB0b2RvRGVsZXRlcih0b2RvSW5kZXgpIHtcbiAgICAgICAgdGhpcy50b2Rvcy5zcGxpY2UodG9kb0luZGV4LCAxKTtcbiAgICB9XG59XG5cbi8vIGZ1bmN0aW9uIHByb2plY3RCdWlsZGVyKG5hbWUsIHByb2plY3RJbmRleCkgeyAvL2ZhY3RvcnkgZnVuY3Rpb24gdG8gYnVpbGQgbmV3IHByb2plY3Qgb2JqZWN0LlxuLy8gICAgIGxldCB0b2RvcyA9IFtdO1xuLy8gICAgIGZ1bmN0aW9uIHRvZG9EYXRlRWRpdG9yKHRvZG9JbmRleCwgbmV3RGF0ZSkge1xuLy8gICAgICAgICB0aGlzLnRvZG9zW3RvZG9JbmRleF0uZHVlRGF0ZSA9IG5ld0RhdGU7XG4vLyAgICAgfVxuLy8gICAgIGZ1bmN0aW9uIHRvZG9EZWxldGVyKHRvZG9JRCl7XG4vLyAgICAgICAgIHRoaXMudG9kb3Muc3BsaWNlKHRvZG9JRCwgMSk7XG4vLyAgICAgfVxuLy8gICAgIHJldHVybiB7XG4vLyAgICAgICAgIG5hbWU6IG5hbWUsXG4vLyAgICAgICAgIHByb2plY3RJbmRleDogcHJvamVjdEluZGV4LFxuLy8gICAgICAgICB0b2RvczogdG9kb3MsXG4vLyAgICAgICAgIHRvZG9EYXRlRWRpdG9yOiB0b2RvRGF0ZUVkaXRvcixcbi8vICAgICAgICAgdG9kb0RlbGV0ZXI6IHRvZG9EZWxldGVyXG4vLyAgICAgfVxuLy8gfVxuLy8gZnVuY3Rpb24gdG9kb0J1aWxkZXIodGl0bGUsIHByb2plY3RJbmRleCwgdG9kb0luZGV4LCBkdWVEYXRlID0gJ05vIGR1ZSBkYXRlLicpIHsgLy9wcm9qZWN0SW5kZXggcmVmZXJzIHRvIHRoZSBwb3NpdGlvbiBvZiB0aGUgcGFyZW50IHByb2plY3QgaW4gdGhlIGFycmF5IG9mIHByb2plY3RzLlxuLy8gICAgIHJldHVybiB7XG4vLyAgICAgICAgIHRpdGxlOiB0aXRsZSxcbi8vICAgICAgICAgcHJvamVjdEluZGV4OiBwcm9qZWN0SW5kZXgsXG4vLyAgICAgICAgIHRvZG9JbmRleDogdG9kb0luZGV4LFxuLy8gICAgICAgICBjb21wbGV0ZWQ6IGZhbHNlLFxuLy8gICAgICAgICBkdWVEYXRlOiBkdWVEYXRlXG4vLyAgICAgfVxuLy8gfVxuLy8gZXhwb3J0IGZ1bmN0aW9uIHByb2plY3REZWxldGVyKHByb2plY3RJbmRleCkge1xuLy8gICAgIFByb2plY3QucHJvamVjdHMuc3BsaWNlKHByb2plY3RJbmRleCwgMSk7XG4vLyB9XG5cbi8vIGV4cG9ydCBmdW5jdGlvbiBhZGROZXdQcm9qZWN0KG5hbWUsIHByb2plY3RJbmRleCkge1xuLy8gICAgIHByb2plY3RzLnB1c2gobmV3IFByb2plY3QobmFtZSwgcHJvamVjdEluZGV4KSk7XG4vLyB9XG4vLyBleHBvcnQgZnVuY3Rpb24gYWRkTmV3VG9kbyh0aXRsZSwgcHJvamVjdEluZGV4LCB0b2RvSW5kZXgsIGR1ZURhdGUgPSAnTm8gZHVlIGRhdGUuJykge1xuLy8gICAgIFByb2plY3QucHJvamVjdHNbcHJvamVjdEluZGV4XS50b2Rvcy5wdXNoKHRvZG9CdWlsZGVyKHRpdGxlLCBwcm9qZWN0SW5kZXgsIHRvZG9JbmRleCwgZHVlRGF0ZSkpO1xuLy8gfSIsImltcG9ydCB7IFByb2plY3QgfSBmcm9tIFwiLi9wcm9qZWN0TWFuYWdlclwiO1xuaW1wb3J0IHsgcHJvamVjdHMgfSBmcm9tIFwiLi9wcm9qZWN0U3RvcmFnZVwiO1xuaW1wb3J0IHsgcGFnZUxvYWRlciB9IGZyb20gXCIuL3BhZ2VMb2FkZXJcIjtcblxuZXhwb3J0IGxldCBhY3RpdmVQcm9qZWN0SW5kZXggPSAwO1xuXG5jb25zdCBwcm9qZWN0TGlzdENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0TGlzdCcpO1xuY29uc3QgbmV3UHJvamVjdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uZXdQcm9qZWN0QnV0dG9uJyk7XG4gICAgY29uc3QgcHJvamVjdElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5ld1Byb2plY3RJbnB1dCcpO1xuY29uc3QgcHJvamVjdExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdExpc3QnKTtcbmNvbnN0IHRvZG9Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9kb0xpc3QnKTtcbmNvbnN0IG5ld1RvZG9CdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmV3VG9kb0J1dHRvbicpO1xuICAgIGNvbnN0IG5ld1RvZG9JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uZXdUb2RvSW5wdXQnKTtcbiAgICBjb25zdCBuZXdUb2RvRGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uZXdUb2RvRGF0ZScpO1xuY29uc3QgZGVsZXRlQWxsQ29tcGxldGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGVsZXRlQ29tcGxldGUnKTtcblxubmV3UHJvamVjdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4geyAvL3dpbGwgbmVlZCB0byByZXdvcmsgdGhpcyB0byBhZGQgdG8gc3RvcmFnZSBhcnJheSByYXRoZXIgdGhhbiBkaXJlY3RseSB0byBET01cbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgaWYgKHByb2plY3RJbnB1dC52YWx1ZSA9PSAnJyB8fCBudWxsKSByZXR1cm47XG4gICAgY2xlYXJFbGVtZW50KHByb2plY3RMaXN0KTtcbiAgICBQcm9qZWN0LmFkZE5ld1Byb2plY3QocHJvamVjdElucHV0LnZhbHVlKTtcbiAgICBwYWdlTG9hZGVyKCk7XG4gICAgcHJvamVjdElucHV0LnZhbHVlID0gJyc7XG59KVxubmV3VG9kb0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBQcm9qZWN0LmFkZE5ld1RvZG8obmV3VG9kb0lucHV0LnZhbHVlLCBhY3RpdmVQcm9qZWN0SW5kZXgsIG5ld1RvZG9EYXRlLnZhbHVlKTtcbiAgICBwYWdlTG9hZGVyKCk7XG4gICAgbmV3VG9kb0lucHV0LnZhbHVlID0gJyc7XG4gICAgbmV3VG9kb0RhdGUudmFsdWUgPSAnJztcbn0pXG5kZWxldGVBbGxDb21wbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBmb3IgKGxldCBpID0gcHJvamVjdHNbYWN0aXZlUHJvamVjdEluZGV4XS50b2Rvcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICBpZiAocHJvamVjdHNbYWN0aXZlUHJvamVjdEluZGV4XS50b2Rvc1tpXS5jb21wbGV0ZWQgPT0gdHJ1ZSkge1xuICAgICAgICAgICAgcHJvamVjdHNbYWN0aXZlUHJvamVjdEluZGV4XS50b2RvRGVsZXRlcihpKTtcbiAgICAgICAgfVxuICAgICAgICBwYWdlTG9hZGVyKCk7XG4gICAgfVxufSlcblxuXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJFbGVtZW50KGVsZW1lbnQpIHtcbiAgICB3aGlsZSAoZWxlbWVudC5maXJzdENoaWxkKSB7XG4gICAgICAgIGVsZW1lbnQucmVtb3ZlQ2hpbGQoZWxlbWVudC5maXJzdENoaWxkKTtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlbGVtZW50QnVpbGRlcihlbGVtZW50LCBjbGFzc0xpc3QsIHRleHRDb250ZW50LCBkYXRhTmFtZSkgeyAgLy9lbGVtZW50IGJ1aWxkZXIgY29waWVkIGFuZCBtb2RpZmllZCBmcm9tIHByZXZpb3VzIHByb2plY3QuXG4gICAgY29uc3QgeGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGVsZW1lbnQpO1xuICAgIGlmIChjbGFzc0xpc3QgIT0gJycpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGFzc0xpc3QgPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGNsYXNzTGlzdC5mb3JFYWNoKGNsYXNzTGFiZWwgPT4ge1xuICAgICAgICAgICAgICAgIHhlbGVtZW50LmNsYXNzTGlzdC5hZGQoY2xhc3NMYWJlbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHhlbGVtZW50LmNsYXNzTGlzdC5hZGQoY2xhc3NMaXN0KTtcbiAgICB9XG4gICAgaWYgKHRleHRDb250ZW50ICE9ICcnKSB7XG4gICAgICAgIHhlbGVtZW50LnZhbHVlID0gdGV4dENvbnRlbnQ7XG4gICAgICAgIHhlbGVtZW50LnRleHRDb250ZW50ID0gdGV4dENvbnRlbnQ7XG4gICAgfVxuICAgIGlmIChkYXRhTmFtZSAhPSAnJykgeGVsZW1lbnQuZGF0YXNldC5lbGVtZW50ID0gZGF0YU5hbWU7XG4gICAgcmV0dXJuIHhlbGVtZW50O1xufVxuXG5mdW5jdGlvbiBwcm9qZWN0Q2FyZEJ1aWxkZXIobmFtZSkge1xuICAgIGxldCBwcm9qZWN0Q2FyZCA9IGVsZW1lbnRCdWlsZGVyKCdkaXYnLCAncHJvamVjdENhcmQnLCBuYW1lLCAnJyk7XG4gICAgcHJvamVjdENhcmQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICAgICAgYWN0aXZlUHJvamVjdFN3aXRjaGVyKGUudGFyZ2V0LmRhdGFzZXQucHJvamVjdElEKTtcbiAgICB9KVxuICAgIHJldHVybiBwcm9qZWN0Q2FyZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHByb2plY3RMaXN0QnVpbGRlcigpIHtcbiAgICBjbGVhckVsZW1lbnQocHJvamVjdExpc3RDb250YWluZXIpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvamVjdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IG5ld1Byb2plY3RDYXJkID0gcHJvamVjdENhcmRCdWlsZGVyKHByb2plY3RzW2ldLm5hbWUpO1xuICAgICAgICBuZXdQcm9qZWN0Q2FyZC5kYXRhc2V0LnByb2plY3RJRCA9IGk7XG4gICAgICAgIHByb2plY3RMaXN0Q29udGFpbmVyLmFwcGVuZChuZXdQcm9qZWN0Q2FyZCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBhY3RpdmVQcm9qZWN0U3dpdGNoZXIobmV3UHJvamVjdEluZGV4KSB7XG4gICAgYWN0aXZlUHJvamVjdEluZGV4ID0gbmV3UHJvamVjdEluZGV4O1xuICAgIHRvZG9MaXN0QnVpbGRlcihhY3RpdmVQcm9qZWN0SW5kZXgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdG9kb0xpc3RCdWlsZGVyKGFjdGl2ZVByb2plY3RJbmRleCkge1xuICAgIGNsZWFyRWxlbWVudCh0b2RvQ29udGFpbmVyKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByb2plY3RzW2FjdGl2ZVByb2plY3RJbmRleF0udG9kb3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IG5ld1RvZG9DYXJkID0gdG9kb0NhcmRCdWlsZGVyKHByb2plY3RzW2FjdGl2ZVByb2plY3RJbmRleF0udG9kb3NbaV0udGl0bGUsIHByb2plY3RzW2FjdGl2ZVByb2plY3RJbmRleF0udG9kb3NbaV0uZHVlRGF0ZSk7XG4gICAgICAgIG5ld1RvZG9DYXJkLmRhdGFzZXQucHJvamVjdElEID0gYWN0aXZlUHJvamVjdEluZGV4O1xuICAgICAgICBuZXdUb2RvQ2FyZC5kYXRhc2V0LnRvZG9JRCA9IGk7XG4gICAgICAgIHRvZG9Db250YWluZXIuYXBwZW5kKG5ld1RvZG9DYXJkKTtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0b2RvQ2FyZEJ1aWxkZXIodGl0bGUsIGR1ZURhdGUpIHsgXG4gICAgbGV0IHRvZG9DYXJkID0gZWxlbWVudEJ1aWxkZXIoJ2RpdicsICd0b2RvQ2FyZCcsICcnLCAnJyk7XG4gICAgbGV0IGNvbXBsZXRlID0gZWxlbWVudEJ1aWxkZXIoJ2RpdicsICdjb21wbGV0ZUJ1dHRvbicsICcnLCAnJyk7XG4gICAgICAgIGNvbXBsZXRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRvZG9JRCA9IGUudGFyZ2V0LnBhcmVudE5vZGUuZGF0YXNldC50b2RvSUQ7XG4gICAgICAgICAgICB0b2RvQ2FyZC5jbGFzc0xpc3QudG9nZ2xlKCdjb21wbGV0ZScpO1xuICAgICAgICAgICAgaWYgKGNvbXBsZXRlLnRleHRDb250ZW50ID09ICcnKSBjb21wbGV0ZS50ZXh0Q29udGVudCA9ICd4JzsgZWxzZSBjb21wbGV0ZS50ZXh0Q29udGVudCA9ICcnO1xuICAgICAgICAgICAgcHJvamVjdHNbYWN0aXZlUHJvamVjdEluZGV4XS5tYXJrVG9kb0NvbXBsZXRlVG9nZ2xlKHRvZG9JRCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhwcm9qZWN0cyk7XG4gICAgICAgIH0pXG4gICAgbGV0IHRvZG9UaXRsZSA9IGVsZW1lbnRCdWlsZGVyKCdoMicsICcnLCB0aXRsZSwgJycpO1xuICAgIGxldCB0b2RvRGF0ZUhvbGRlciA9IGVsZW1lbnRCdWlsZGVyKCdkaXYnLCAnZGF0ZUhvbGRlcicsICcnLCAnJyk7XG4gICAgbGV0IHRvZG9EdWVEYXRlID0gZWxlbWVudEJ1aWxkZXIoJ2gzJywgJycsICcnLCAnJyk7XG4gICAgICAgIGlmIChkdWVEYXRlID09ICcnKSB0b2RvRHVlRGF0ZS50ZXh0Q29udGVudCA9ICdObyBkdWUgZGF0ZSc7IGVsc2UgdG9kb0R1ZURhdGUudGV4dENvbnRlbnQgPSBgRHVlICR7ZHVlRGF0ZX1gO1xuICAgIHRvZG9EYXRlSG9sZGVyLmFwcGVuZCh0b2RvRHVlRGF0ZSk7XG4gICAgbGV0IHRvZG9EdWVEYXRlUGlja2VyID0gZWxlbWVudEJ1aWxkZXIoJ2lucHV0JywgJycsICcnLCAnJyk7XG4gICAgICAgIHRvZG9EdWVEYXRlUGlja2VyLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJkYXRlXCIpO1xuICAgICAgICBpZiAoZHVlRGF0ZSA9PSAnJykgdG9kb0R1ZURhdGVQaWNrZXIudmFsdWUgPSAnJzsgZWxzZSB0b2RvRHVlRGF0ZVBpY2tlci52YWx1ZSA9IGR1ZURhdGU7XG4gICAgICAgICAgICB0b2RvRHVlRGF0ZVBpY2tlci5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgKGUpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9qZWN0SUQgPSBlLnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUuZGF0YXNldC5wcm9qZWN0SUQ7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9kb0lEID0gZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLmRhdGFzZXQudG9kb0lEO1xuICAgICAgICAgICAgICAgIGxldCBuZXdEdWVEYXRlID0gdG9kb0R1ZURhdGVQaWNrZXIudmFsdWU7XG4gICAgICAgICAgICAgICAgcHJvamVjdHNbcHJvamVjdElEXS50b2RvRGF0ZUVkaXRvcih0b2RvSUQsIG5ld0R1ZURhdGUpO1xuICAgICAgICAgICAgICAgIGlmIChuZXdEdWVEYXRlICE9ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRvZG9EdWVEYXRlLnRleHRDb250ZW50ID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIHRvZG9EdWVEYXRlLnRleHRDb250ZW50ID0gYER1ZSAke25ld0R1ZURhdGV9YFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdG9kb0RhdGVIb2xkZXIucmVtb3ZlQ2hpbGQodG9kb0RhdGVIb2xkZXIuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICAgICAgdG9kb0RhdGVIb2xkZXIuYXBwZW5kKHRvZG9EdWVEYXRlKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIHRvZG9EdWVEYXRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdG9kb0RhdGVIb2xkZXIucmVtb3ZlQ2hpbGQodG9kb0RhdGVIb2xkZXIuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICB0b2RvRGF0ZUhvbGRlci5hcHBlbmQodG9kb0R1ZURhdGVQaWNrZXIpO1xuICAgICAgICAgICAgdG9kb0R1ZURhdGVQaWNrZXIuZm9jdXMoKTtcbiAgICAgICAgfSlcbiAgICAgICAgXG5cbiAgICB0b2RvQ2FyZC5hcHBlbmQoY29tcGxldGUsIHRvZG9UaXRsZSwgdG9kb0RhdGVIb2xkZXIpO1xuICAgIHJldHVybiB0b2RvQ2FyZDtcbn1cbiIsIlxuaW1wb3J0IHsgdG9kb0xpc3RCdWlsZGVyLCBwcm9qZWN0TGlzdEJ1aWxkZXIgfSBmcm9tIFwiLi9kb21Db250cm9sbGVyXCI7XG5pbXBvcnQgeyBhY3RpdmVQcm9qZWN0SW5kZXggfSBmcm9tIFwiLi9kb21Db250cm9sbGVyXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBwYWdlTG9hZGVyKCkge1xuICAgIHByb2plY3RMaXN0QnVpbGRlcigpO1xuICAgIHRvZG9MaXN0QnVpbGRlcihhY3RpdmVQcm9qZWN0SW5kZXgpO1xufSIsImltcG9ydCB7IFByb2plY3QgfSBmcm9tIFwiLi9wcm9qZWN0TWFuYWdlclwiO1xuaW1wb3J0IHsgcGFnZUxvYWRlciB9IGZyb20gXCIuL3BhZ2VMb2FkZXJcIjtcbmltcG9ydCB7IHByb2plY3RzIH0gZnJvbSBcIi4vcHJvamVjdFN0b3JhZ2VcIjtcblxuUHJvamVjdC5hZGROZXdQcm9qZWN0KCd0ZXN0IHByb2plY3QnLCAwKTtcblByb2plY3QuYWRkTmV3VG9kbygnVGVzdCB0b2RvJywgMCk7XG5Qcm9qZWN0LmFkZE5ld1RvZG8oJ2Fub3RoZXIgdGVzdCB0b2RvJywgMCk7XG5Qcm9qZWN0LmFkZE5ld1Byb2plY3QoJ3NlY29uZCB0ZXN0IHByb2plY3QnLCAxKTtcblByb2plY3QuYWRkTmV3VG9kbygnc2Vjb25kIHRlc3QgdG9kbycsIDEpO1xuUHJvamVjdC5hZGROZXdUb2RvKCdZZXQgYW5vdGhlciB0aGluZyB0byBkbycsIDEpO1xuY29uc29sZS5sb2cocHJvamVjdHMpO1xuXG5cblxucGFnZUxvYWRlcigpO1xuIl0sIm5hbWVzIjpbInByb2plY3RzIiwiUHJvamVjdCIsImNvbnN0cnVjdG9yIiwibmFtZSIsInByb2plY3RJbmRleCIsInRoaXMiLCJ0b2RvcyIsImFkZE5ld1RvZG8iLCJ0aXRsZSIsImR1ZURhdGUiLCJ0b2RvIiwiY29tcGxldGVkIiwicHVzaCIsInByb2plY3REZWxldGVyIiwic3BsaWNlIiwiYWRkTmV3UHJvamVjdCIsIm1hcmtUb2RvQ29tcGxldGVUb2dnbGUiLCJ0b2RvSW5kZXgiLCJ0b2RvRGF0ZUVkaXRvciIsIm5ld0RhdGUiLCJ0b2RvRGVsZXRlciIsImFjdGl2ZVByb2plY3RJbmRleCIsInByb2plY3RMaXN0Q29udGFpbmVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwibmV3UHJvamVjdEJ1dHRvbiIsInByb2plY3RJbnB1dCIsInByb2plY3RMaXN0IiwidG9kb0NvbnRhaW5lciIsIm5ld1RvZG9CdXR0b24iLCJuZXdUb2RvSW5wdXQiLCJuZXdUb2RvRGF0ZSIsImRlbGV0ZUFsbENvbXBsZXRlQnV0dG9uIiwiY2xlYXJFbGVtZW50IiwiZWxlbWVudCIsImZpcnN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsImVsZW1lbnRCdWlsZGVyIiwiY2xhc3NMaXN0IiwidGV4dENvbnRlbnQiLCJkYXRhTmFtZSIsInhlbGVtZW50IiwiY3JlYXRlRWxlbWVudCIsImZvckVhY2giLCJjbGFzc0xhYmVsIiwiYWRkIiwidmFsdWUiLCJkYXRhc2V0IiwicHJvamVjdENhcmRCdWlsZGVyIiwicHJvamVjdENhcmQiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsIm5ld1Byb2plY3RJbmRleCIsInRhcmdldCIsInByb2plY3RJRCIsInRvZG9MaXN0QnVpbGRlciIsImkiLCJsZW5ndGgiLCJuZXdUb2RvQ2FyZCIsInRvZG9DYXJkQnVpbGRlciIsInRvZG9JRCIsImFwcGVuZCIsInRvZG9DYXJkIiwiY29tcGxldGUiLCJwYXJlbnROb2RlIiwidG9nZ2xlIiwiY29uc29sZSIsImxvZyIsInRvZG9UaXRsZSIsInRvZG9EYXRlSG9sZGVyIiwidG9kb0R1ZURhdGUiLCJ0b2RvRHVlRGF0ZVBpY2tlciIsInNldEF0dHJpYnV0ZSIsIm5ld0R1ZURhdGUiLCJmb2N1cyIsInBhZ2VMb2FkZXIiLCJuZXdQcm9qZWN0Q2FyZCIsInByb2plY3RMaXN0QnVpbGRlciIsInByZXZlbnREZWZhdWx0Il0sInNvdXJjZVJvb3QiOiIifQ==