(()=>{"use strict";let e=[];class t{constructor(e,t){this.name=e,this.projectIndex=t,this.todos=[]}static addNewTodo(t,o,d=""){const n={title:t,projectIndex:o,completed:!1,dueDate:d};e[o].todos.push(n)}static projectDeleter(t){e.splice(t,1)}static addNewProject(o,d){e.push(new t(o,d))}markTodoCompleteToggle(e){this.todos[e].completed=!this.todos[e].completed}todoDateEditor(e,t){this.todos[e].dueDate=t}todoDeleter(e){this.todos.splice(e,1)}}let o=0;const d=document.querySelector(".projectList"),n=document.querySelector(".newProjectButton"),a=document.querySelector(".newProjectInput"),r=document.querySelector(".projectList"),c=document.querySelector(".todoList"),l=document.querySelector(".newTodoButton"),s=document.querySelector(".newTodoInput"),i=document.querySelector(".newTodoDate"),u=document.querySelector(".deleteComplete");function p(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function m(e,t,o,d){const n=document.createElement(e);return""!=t&&("object"==typeof t?t.forEach((e=>{n.classList.add(e)})):n.classList.add(t)),""!=o&&(n.value=o,n.textContent=o),""!=d&&(n.dataset.element=d),n}function v(e){let t=m("div","projectCard",e,"");return t.addEventListener("click",(e=>{var t;t=e.target.dataset.projectID,o=t,h(o)})),t}function h(t){p(c);for(let o=0;o<e[t].todos.length;o++){let d=f(e[t].todos[o].title,e[t].todos[o].dueDate);d.dataset.projectID=t,d.dataset.todoID=o,c.append(d)}}function f(t,d){let n=m("div","todoCard","",""),a=m("div",["completeButton","material-symbols-outlined"],"","");a.addEventListener("click",(t=>{const d=t.target.parentNode.dataset.todoID;n.classList.toggle("complete"),a.classList.toggle("selected"),e[o].markTodoCompleteToggle(d),console.log(e)}));let r=m("h2","",t,""),c=m("div","dateHolder","",""),l=m("h3","","","");l.textContent=""==d?"No due date":`Due ${d}`,c.append(l);let s=m("input","","","");return s.setAttribute("type","date"),s.value=""==d?"":d,s.addEventListener("blur",(t=>{const o=t.target.parentNode.parentNode.dataset.projectID,d=t.target.parentNode.parentNode.dataset.todoID;let n=s.value;e[o].todoDateEditor(d,n),""!=n&&(l.textContent="",l.textContent=`Due ${n}`),c.removeChild(c.firstChild),c.append(l)})),l.addEventListener("click",(()=>{c.removeChild(c.firstChild),c.append(s),s.focus()})),n.append(a,r,c),n}function D(){!function(){p(d);for(let t=0;t<e.length;t++){let o=v(e[t].name);o.dataset.projectID=t,d.append(o)}}(),h(o)}n.addEventListener("click",(e=>{e.preventDefault(),""!=a.value&&(p(r),t.addNewProject(a.value),D(),a.value="")})),l.addEventListener("click",(e=>{e.preventDefault(),t.addNewTodo(s.value,o,i.value),D(),s.value="",i.value=""})),u.addEventListener("click",(t=>{t.preventDefault();for(let t=e[o].todos.length-1;t>=0;t--)1==e[o].todos[t].completed&&e[o].todoDeleter(t),D()})),t.addNewProject("test project",0),t.addNewTodo("Test todo",0),t.addNewTodo("another test todo",0),t.addNewProject("second test project",1),t.addNewTodo("second test todo",1),t.addNewTodo("Yet another thing to do",1),console.log(e),D()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFJeEQsRUFBU3lELE9BQVFELElBQUssQ0FDdEMsSUFBSW9CLEVBQWlCNUIsRUFBbUJoRCxFQUFTd0QsR0FBR3JELE1BQ3BEeUUsRUFBZTdCLFFBQVFPLFVBQVlFLEVBQ25DbEMsRUFBcUJ1QyxPQUFPZSxFQUNoQyxDQUNKLENDM0VJQyxHQUNBdEIsRUFBZ0JsQyxFQUNwQixDRFNBSSxFQUFpQnlCLGlCQUFpQixTQUFTQyxJQUN2Q0EsRUFBRTJCLGlCQUN3QixJQUF0QnBELEVBQWFvQixRQUNqQmIsRUFBYU4sR0FDYjFCLEVBQVFjLGNBQWNXLEVBQWFvQixPQUNuQzZCLElBQ0FqRCxFQUFhb0IsTUFBUSxHQUFFLElBRTNCakIsRUFBY3FCLGlCQUFpQixTQUFTQyxJQUNwQ0EsRUFBRTJCLGlCQUNGN0UsRUFBUU0sV0FBV3VCLEVBQWFnQixNQUFPekIsRUFBb0JVLEVBQVllLE9BQ3ZFNkIsSUFDQTdDLEVBQWFnQixNQUFRLEdBQ3JCZixFQUFZZSxNQUFRLEVBQUUsSUFFMUJkLEVBQXdCa0IsaUJBQWlCLFNBQVNDLElBQzlDQSxFQUFFMkIsaUJBQ0YsSUFBSyxJQUFJdEIsRUFBSXhELEVBQVNxQixHQUFvQmYsTUFBTW1ELE9BQVMsRUFBR0QsR0FBSyxFQUFHQSxJQUNULEdBQW5EeEQsRUFBU3FCLEdBQW9CZixNQUFNa0QsR0FBRzdDLFdBQ3RDWCxFQUFTcUIsR0FBb0JELFlBQVlvQyxHQUU3Q21CLEdBQ0osSUVsQ0oxRSxFQUFRYyxjQUFjLGVBQWdCLEdBQ3RDZCxFQUFRTSxXQUFXLFlBQWEsR0FDaENOLEVBQVFNLFdBQVcsb0JBQXFCLEdBQ3hDTixFQUFRYyxjQUFjLHNCQUF1QixHQUM3Q2QsRUFBUU0sV0FBVyxtQkFBb0IsR0FDdkNOLEVBQVFNLFdBQVcsMEJBQTJCLEdBQzlDMkQsUUFBUUMsSUFBSW5FLEdBSVoyRSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL3Byb2plY3RTdG9yYWdlLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9wcm9qZWN0TWFuYWdlci5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvZG9tQ29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvcGFnZUxvYWRlci5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGxldCBwcm9qZWN0cyA9IFtdOyIsImltcG9ydCB7IHByb2plY3RzIH0gZnJvbSBcIi4vcHJvamVjdFN0b3JhZ2VcIjtcblxuZXhwb3J0IGNsYXNzIFByb2plY3Qge1xuICAgIGNvbnN0cnVjdG9yKG5hbWUsIHByb2plY3RJbmRleCkge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLnByb2plY3RJbmRleCA9IHByb2plY3RJbmRleDtcbiAgICAgICAgdGhpcy50b2RvcyA9IFtdO1xuICAgIH1cblxuICAgIHN0YXRpYyBhZGROZXdUb2RvKHRpdGxlLCBwcm9qZWN0SW5kZXgsIGR1ZURhdGUgPSAnJykge1xuICAgICAgICBjb25zdCB0b2RvID0ge1xuICAgICAgICAgICAgdGl0bGU6IHRpdGxlLFxuICAgICAgICAgICAgcHJvamVjdEluZGV4OiBwcm9qZWN0SW5kZXgsXG4gICAgICAgICAgICAvLyB0b2RvSW5kZXg6IHRvZG9JbmRleCxcbiAgICAgICAgICAgIGNvbXBsZXRlZDogZmFsc2UsXG4gICAgICAgICAgICBkdWVEYXRlOiBkdWVEYXRlXG4gICAgICAgIH1cbiAgICAgICAgcHJvamVjdHNbcHJvamVjdEluZGV4XS50b2Rvcy5wdXNoKHRvZG8pO1xuICAgIH1cblxuICAgIHN0YXRpYyBwcm9qZWN0RGVsZXRlcihwcm9qZWN0SW5kZXgpIHtcbiAgICAgICAgcHJvamVjdHMuc3BsaWNlKHByb2plY3RJbmRleCwgMSk7XG4gICAgfVxuXG4gICAgc3RhdGljIGFkZE5ld1Byb2plY3QobmFtZSwgcHJvamVjdEluZGV4KSB7XG4gICAgICAgIHByb2plY3RzLnB1c2gobmV3IFByb2plY3QobmFtZSwgcHJvamVjdEluZGV4KSk7XG4gICAgfVxuXG4gICAgbWFya1RvZG9Db21wbGV0ZVRvZ2dsZSh0b2RvSW5kZXgpIHtcbiAgICAgICAgdGhpcy50b2Rvc1t0b2RvSW5kZXhdLmNvbXBsZXRlZCA9ICF0aGlzLnRvZG9zW3RvZG9JbmRleF0uY29tcGxldGVkO1xuICAgIH1cblxuICAgIHRvZG9EYXRlRWRpdG9yKHRvZG9JbmRleCwgbmV3RGF0ZSkge1xuICAgICAgICB0aGlzLnRvZG9zW3RvZG9JbmRleF0uZHVlRGF0ZSA9IG5ld0RhdGU7XG4gICAgfVxuXG4gICAgdG9kb0RlbGV0ZXIodG9kb0luZGV4KSB7XG4gICAgICAgIHRoaXMudG9kb3Muc3BsaWNlKHRvZG9JbmRleCwgMSk7XG4gICAgfVxufVxuXG4vLyBmdW5jdGlvbiBwcm9qZWN0QnVpbGRlcihuYW1lLCBwcm9qZWN0SW5kZXgpIHsgLy9mYWN0b3J5IGZ1bmN0aW9uIHRvIGJ1aWxkIG5ldyBwcm9qZWN0IG9iamVjdC5cbi8vICAgICBsZXQgdG9kb3MgPSBbXTtcbi8vICAgICBmdW5jdGlvbiB0b2RvRGF0ZUVkaXRvcih0b2RvSW5kZXgsIG5ld0RhdGUpIHtcbi8vICAgICAgICAgdGhpcy50b2Rvc1t0b2RvSW5kZXhdLmR1ZURhdGUgPSBuZXdEYXRlO1xuLy8gICAgIH1cbi8vICAgICBmdW5jdGlvbiB0b2RvRGVsZXRlcih0b2RvSUQpe1xuLy8gICAgICAgICB0aGlzLnRvZG9zLnNwbGljZSh0b2RvSUQsIDEpO1xuLy8gICAgIH1cbi8vICAgICByZXR1cm4ge1xuLy8gICAgICAgICBuYW1lOiBuYW1lLFxuLy8gICAgICAgICBwcm9qZWN0SW5kZXg6IHByb2plY3RJbmRleCxcbi8vICAgICAgICAgdG9kb3M6IHRvZG9zLFxuLy8gICAgICAgICB0b2RvRGF0ZUVkaXRvcjogdG9kb0RhdGVFZGl0b3IsXG4vLyAgICAgICAgIHRvZG9EZWxldGVyOiB0b2RvRGVsZXRlclxuLy8gICAgIH1cbi8vIH1cbi8vIGZ1bmN0aW9uIHRvZG9CdWlsZGVyKHRpdGxlLCBwcm9qZWN0SW5kZXgsIHRvZG9JbmRleCwgZHVlRGF0ZSA9ICdObyBkdWUgZGF0ZS4nKSB7IC8vcHJvamVjdEluZGV4IHJlZmVycyB0byB0aGUgcG9zaXRpb24gb2YgdGhlIHBhcmVudCBwcm9qZWN0IGluIHRoZSBhcnJheSBvZiBwcm9qZWN0cy5cbi8vICAgICByZXR1cm4ge1xuLy8gICAgICAgICB0aXRsZTogdGl0bGUsXG4vLyAgICAgICAgIHByb2plY3RJbmRleDogcHJvamVjdEluZGV4LFxuLy8gICAgICAgICB0b2RvSW5kZXg6IHRvZG9JbmRleCxcbi8vICAgICAgICAgY29tcGxldGVkOiBmYWxzZSxcbi8vICAgICAgICAgZHVlRGF0ZTogZHVlRGF0ZVxuLy8gICAgIH1cbi8vIH1cbi8vIGV4cG9ydCBmdW5jdGlvbiBwcm9qZWN0RGVsZXRlcihwcm9qZWN0SW5kZXgpIHtcbi8vICAgICBQcm9qZWN0LnByb2plY3RzLnNwbGljZShwcm9qZWN0SW5kZXgsIDEpO1xuLy8gfVxuXG4vLyBleHBvcnQgZnVuY3Rpb24gYWRkTmV3UHJvamVjdChuYW1lLCBwcm9qZWN0SW5kZXgpIHtcbi8vICAgICBwcm9qZWN0cy5wdXNoKG5ldyBQcm9qZWN0KG5hbWUsIHByb2plY3RJbmRleCkpO1xuLy8gfVxuLy8gZXhwb3J0IGZ1bmN0aW9uIGFkZE5ld1RvZG8odGl0bGUsIHByb2plY3RJbmRleCwgdG9kb0luZGV4LCBkdWVEYXRlID0gJ05vIGR1ZSBkYXRlLicpIHtcbi8vICAgICBQcm9qZWN0LnByb2plY3RzW3Byb2plY3RJbmRleF0udG9kb3MucHVzaCh0b2RvQnVpbGRlcih0aXRsZSwgcHJvamVjdEluZGV4LCB0b2RvSW5kZXgsIGR1ZURhdGUpKTtcbi8vIH0iLCJpbXBvcnQgeyBQcm9qZWN0IH0gZnJvbSBcIi4vcHJvamVjdE1hbmFnZXJcIjtcbmltcG9ydCB7IHByb2plY3RzIH0gZnJvbSBcIi4vcHJvamVjdFN0b3JhZ2VcIjtcbmltcG9ydCB7IHBhZ2VMb2FkZXIgfSBmcm9tIFwiLi9wYWdlTG9hZGVyXCI7XG5cbmV4cG9ydCBsZXQgYWN0aXZlUHJvamVjdEluZGV4ID0gMDtcblxuY29uc3QgcHJvamVjdExpc3RDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdExpc3QnKTtcbmNvbnN0IG5ld1Byb2plY3RCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmV3UHJvamVjdEJ1dHRvbicpO1xuICAgIGNvbnN0IHByb2plY3RJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uZXdQcm9qZWN0SW5wdXQnKTtcbmNvbnN0IHByb2plY3RMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3RMaXN0Jyk7XG5jb25zdCB0b2RvQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvZG9MaXN0Jyk7XG5jb25zdCBuZXdUb2RvQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5ld1RvZG9CdXR0b24nKTtcbiAgICBjb25zdCBuZXdUb2RvSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmV3VG9kb0lucHV0Jyk7XG4gICAgY29uc3QgbmV3VG9kb0RhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmV3VG9kb0RhdGUnKTtcbmNvbnN0IGRlbGV0ZUFsbENvbXBsZXRlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRlbGV0ZUNvbXBsZXRlJyk7XG5cbm5ld1Byb2plY3RCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHsgLy93aWxsIG5lZWQgdG8gcmV3b3JrIHRoaXMgdG8gYWRkIHRvIHN0b3JhZ2UgYXJyYXkgcmF0aGVyIHRoYW4gZGlyZWN0bHkgdG8gRE9NXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGlmIChwcm9qZWN0SW5wdXQudmFsdWUgPT0gJycgfHwgbnVsbCkgcmV0dXJuO1xuICAgIGNsZWFyRWxlbWVudChwcm9qZWN0TGlzdCk7XG4gICAgUHJvamVjdC5hZGROZXdQcm9qZWN0KHByb2plY3RJbnB1dC52YWx1ZSk7XG4gICAgcGFnZUxvYWRlcigpO1xuICAgIHByb2plY3RJbnB1dC52YWx1ZSA9ICcnO1xufSlcbm5ld1RvZG9CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgUHJvamVjdC5hZGROZXdUb2RvKG5ld1RvZG9JbnB1dC52YWx1ZSwgYWN0aXZlUHJvamVjdEluZGV4LCBuZXdUb2RvRGF0ZS52YWx1ZSk7XG4gICAgcGFnZUxvYWRlcigpO1xuICAgIG5ld1RvZG9JbnB1dC52YWx1ZSA9ICcnO1xuICAgIG5ld1RvZG9EYXRlLnZhbHVlID0gJyc7XG59KVxuZGVsZXRlQWxsQ29tcGxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgZm9yIChsZXQgaSA9IHByb2plY3RzW2FjdGl2ZVByb2plY3RJbmRleF0udG9kb3MubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgaWYgKHByb2plY3RzW2FjdGl2ZVByb2plY3RJbmRleF0udG9kb3NbaV0uY29tcGxldGVkID09IHRydWUpIHtcbiAgICAgICAgICAgIHByb2plY3RzW2FjdGl2ZVByb2plY3RJbmRleF0udG9kb0RlbGV0ZXIoaSk7XG4gICAgICAgIH1cbiAgICAgICAgcGFnZUxvYWRlcigpO1xuICAgIH1cbn0pXG5cblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyRWxlbWVudChlbGVtZW50KSB7XG4gICAgd2hpbGUgKGVsZW1lbnQuZmlyc3RDaGlsZCkge1xuICAgICAgICBlbGVtZW50LnJlbW92ZUNoaWxkKGVsZW1lbnQuZmlyc3RDaGlsZCk7XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZWxlbWVudEJ1aWxkZXIoZWxlbWVudCwgY2xhc3NMaXN0LCB0ZXh0Q29udGVudCwgZGF0YU5hbWUpIHsgIC8vZWxlbWVudCBidWlsZGVyIGNvcGllZCBhbmQgbW9kaWZpZWQgZnJvbSBwcmV2aW91cyBwcm9qZWN0LlxuICAgIGNvbnN0IHhlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChlbGVtZW50KTtcbiAgICBpZiAoY2xhc3NMaXN0ICE9ICcnKSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xhc3NMaXN0ID09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBjbGFzc0xpc3QuZm9yRWFjaChjbGFzc0xhYmVsID0+IHtcbiAgICAgICAgICAgICAgICB4ZWxlbWVudC5jbGFzc0xpc3QuYWRkKGNsYXNzTGFiZWwpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB4ZWxlbWVudC5jbGFzc0xpc3QuYWRkKGNsYXNzTGlzdCk7XG4gICAgfVxuICAgIGlmICh0ZXh0Q29udGVudCAhPSAnJykge1xuICAgICAgICB4ZWxlbWVudC52YWx1ZSA9IHRleHRDb250ZW50O1xuICAgICAgICB4ZWxlbWVudC50ZXh0Q29udGVudCA9IHRleHRDb250ZW50O1xuICAgIH1cbiAgICBpZiAoZGF0YU5hbWUgIT0gJycpIHhlbGVtZW50LmRhdGFzZXQuZWxlbWVudCA9IGRhdGFOYW1lO1xuICAgIHJldHVybiB4ZWxlbWVudDtcbn1cblxuZnVuY3Rpb24gcHJvamVjdENhcmRCdWlsZGVyKG5hbWUpIHtcbiAgICBsZXQgcHJvamVjdENhcmQgPSBlbGVtZW50QnVpbGRlcignZGl2JywgJ3Byb2plY3RDYXJkJywgbmFtZSwgJycpO1xuICAgIHByb2plY3RDYXJkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgICAgIGFjdGl2ZVByb2plY3RTd2l0Y2hlcihlLnRhcmdldC5kYXRhc2V0LnByb2plY3RJRCk7XG4gICAgfSlcbiAgICByZXR1cm4gcHJvamVjdENhcmQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwcm9qZWN0TGlzdEJ1aWxkZXIoKSB7XG4gICAgY2xlYXJFbGVtZW50KHByb2plY3RMaXN0Q29udGFpbmVyKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByb2plY3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBuZXdQcm9qZWN0Q2FyZCA9IHByb2plY3RDYXJkQnVpbGRlcihwcm9qZWN0c1tpXS5uYW1lKTtcbiAgICAgICAgbmV3UHJvamVjdENhcmQuZGF0YXNldC5wcm9qZWN0SUQgPSBpO1xuICAgICAgICBwcm9qZWN0TGlzdENvbnRhaW5lci5hcHBlbmQobmV3UHJvamVjdENhcmQpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gYWN0aXZlUHJvamVjdFN3aXRjaGVyKG5ld1Byb2plY3RJbmRleCkge1xuICAgIGFjdGl2ZVByb2plY3RJbmRleCA9IG5ld1Byb2plY3RJbmRleDtcbiAgICB0b2RvTGlzdEJ1aWxkZXIoYWN0aXZlUHJvamVjdEluZGV4KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRvZG9MaXN0QnVpbGRlcihhY3RpdmVQcm9qZWN0SW5kZXgpIHtcbiAgICBjbGVhckVsZW1lbnQodG9kb0NvbnRhaW5lcik7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcm9qZWN0c1thY3RpdmVQcm9qZWN0SW5kZXhdLnRvZG9zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBuZXdUb2RvQ2FyZCA9IHRvZG9DYXJkQnVpbGRlcihwcm9qZWN0c1thY3RpdmVQcm9qZWN0SW5kZXhdLnRvZG9zW2ldLnRpdGxlLCBwcm9qZWN0c1thY3RpdmVQcm9qZWN0SW5kZXhdLnRvZG9zW2ldLmR1ZURhdGUpO1xuICAgICAgICBuZXdUb2RvQ2FyZC5kYXRhc2V0LnByb2plY3RJRCA9IGFjdGl2ZVByb2plY3RJbmRleDtcbiAgICAgICAgbmV3VG9kb0NhcmQuZGF0YXNldC50b2RvSUQgPSBpO1xuICAgICAgICB0b2RvQ29udGFpbmVyLmFwcGVuZChuZXdUb2RvQ2FyZCk7XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdG9kb0NhcmRCdWlsZGVyKHRpdGxlLCBkdWVEYXRlKSB7IFxuICAgIGxldCB0b2RvQ2FyZCA9IGVsZW1lbnRCdWlsZGVyKCdkaXYnLCAndG9kb0NhcmQnLCAnJywgJycpO1xuICAgIGxldCBjb21wbGV0ZSA9IGVsZW1lbnRCdWlsZGVyKCdkaXYnLCBbJ2NvbXBsZXRlQnV0dG9uJywgJ21hdGVyaWFsLXN5bWJvbHMtb3V0bGluZWQnXSwgJycsICcnKTtcbiAgICAgICAgY29tcGxldGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdG9kb0lEID0gZS50YXJnZXQucGFyZW50Tm9kZS5kYXRhc2V0LnRvZG9JRDtcbiAgICAgICAgICAgIHRvZG9DYXJkLmNsYXNzTGlzdC50b2dnbGUoJ2NvbXBsZXRlJyk7XG4gICAgICAgICAgICBjb21wbGV0ZS5jbGFzc0xpc3QudG9nZ2xlKCdzZWxlY3RlZCcpO1xuICAgICAgICAgICAgLy8gaWYgKGNvbXBsZXRlLnRleHRDb250ZW50ID09ICcnKSBjb21wbGV0ZS50ZXh0Q29udGVudCA9ICcnOyBlbHNlIGNvbXBsZXRlLnRleHRDb250ZW50ID0gJyc7XG4gICAgICAgICAgICBwcm9qZWN0c1thY3RpdmVQcm9qZWN0SW5kZXhdLm1hcmtUb2RvQ29tcGxldGVUb2dnbGUodG9kb0lEKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHByb2plY3RzKTtcbiAgICAgICAgfSlcbiAgICBsZXQgdG9kb1RpdGxlID0gZWxlbWVudEJ1aWxkZXIoJ2gyJywgJycsIHRpdGxlLCAnJyk7XG4gICAgbGV0IHRvZG9EYXRlSG9sZGVyID0gZWxlbWVudEJ1aWxkZXIoJ2RpdicsICdkYXRlSG9sZGVyJywgJycsICcnKTtcbiAgICBsZXQgdG9kb0R1ZURhdGUgPSBlbGVtZW50QnVpbGRlcignaDMnLCAnJywgJycsICcnKTtcbiAgICAgICAgaWYgKGR1ZURhdGUgPT0gJycpIHRvZG9EdWVEYXRlLnRleHRDb250ZW50ID0gJ05vIGR1ZSBkYXRlJzsgZWxzZSB0b2RvRHVlRGF0ZS50ZXh0Q29udGVudCA9IGBEdWUgJHtkdWVEYXRlfWA7XG4gICAgdG9kb0RhdGVIb2xkZXIuYXBwZW5kKHRvZG9EdWVEYXRlKTtcbiAgICBsZXQgdG9kb0R1ZURhdGVQaWNrZXIgPSBlbGVtZW50QnVpbGRlcignaW5wdXQnLCAnJywgJycsICcnKTtcbiAgICAgICAgdG9kb0R1ZURhdGVQaWNrZXIuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImRhdGVcIik7XG4gICAgICAgIGlmIChkdWVEYXRlID09ICcnKSB0b2RvRHVlRGF0ZVBpY2tlci52YWx1ZSA9ICcnOyBlbHNlIHRvZG9EdWVEYXRlUGlja2VyLnZhbHVlID0gZHVlRGF0ZTtcbiAgICAgICAgICAgIHRvZG9EdWVEYXRlUGlja2VyLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb2plY3RJRCA9IGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5kYXRhc2V0LnByb2plY3RJRDtcbiAgICAgICAgICAgICAgICBjb25zdCB0b2RvSUQgPSBlLnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUuZGF0YXNldC50b2RvSUQ7XG4gICAgICAgICAgICAgICAgbGV0IG5ld0R1ZURhdGUgPSB0b2RvRHVlRGF0ZVBpY2tlci52YWx1ZTtcbiAgICAgICAgICAgICAgICBwcm9qZWN0c1twcm9qZWN0SURdLnRvZG9EYXRlRWRpdG9yKHRvZG9JRCwgbmV3RHVlRGF0ZSk7XG4gICAgICAgICAgICAgICAgaWYgKG5ld0R1ZURhdGUgIT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgdG9kb0R1ZURhdGUudGV4dENvbnRlbnQgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgdG9kb0R1ZURhdGUudGV4dENvbnRlbnQgPSBgRHVlICR7bmV3RHVlRGF0ZX1gXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0b2RvRGF0ZUhvbGRlci5yZW1vdmVDaGlsZCh0b2RvRGF0ZUhvbGRlci5maXJzdENoaWxkKTtcbiAgICAgICAgICAgICAgICB0b2RvRGF0ZUhvbGRlci5hcHBlbmQodG9kb0R1ZURhdGUpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgdG9kb0R1ZURhdGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB0b2RvRGF0ZUhvbGRlci5yZW1vdmVDaGlsZCh0b2RvRGF0ZUhvbGRlci5maXJzdENoaWxkKTtcbiAgICAgICAgICAgIHRvZG9EYXRlSG9sZGVyLmFwcGVuZCh0b2RvRHVlRGF0ZVBpY2tlcik7XG4gICAgICAgICAgICB0b2RvRHVlRGF0ZVBpY2tlci5mb2N1cygpO1xuICAgICAgICB9KVxuICAgICAgICBcblxuICAgIHRvZG9DYXJkLmFwcGVuZChjb21wbGV0ZSwgdG9kb1RpdGxlLCB0b2RvRGF0ZUhvbGRlcik7XG4gICAgcmV0dXJuIHRvZG9DYXJkO1xufVxuIiwiXG5pbXBvcnQgeyB0b2RvTGlzdEJ1aWxkZXIsIHByb2plY3RMaXN0QnVpbGRlciB9IGZyb20gXCIuL2RvbUNvbnRyb2xsZXJcIjtcbmltcG9ydCB7IGFjdGl2ZVByb2plY3RJbmRleCB9IGZyb20gXCIuL2RvbUNvbnRyb2xsZXJcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHBhZ2VMb2FkZXIoKSB7XG4gICAgcHJvamVjdExpc3RCdWlsZGVyKCk7XG4gICAgdG9kb0xpc3RCdWlsZGVyKGFjdGl2ZVByb2plY3RJbmRleCk7XG59IiwiaW1wb3J0IHsgUHJvamVjdCB9IGZyb20gXCIuL3Byb2plY3RNYW5hZ2VyXCI7XG5pbXBvcnQgeyBwYWdlTG9hZGVyIH0gZnJvbSBcIi4vcGFnZUxvYWRlclwiO1xuaW1wb3J0IHsgcHJvamVjdHMgfSBmcm9tIFwiLi9wcm9qZWN0U3RvcmFnZVwiO1xuXG5Qcm9qZWN0LmFkZE5ld1Byb2plY3QoJ3Rlc3QgcHJvamVjdCcsIDApO1xuUHJvamVjdC5hZGROZXdUb2RvKCdUZXN0IHRvZG8nLCAwKTtcblByb2plY3QuYWRkTmV3VG9kbygnYW5vdGhlciB0ZXN0IHRvZG8nLCAwKTtcblByb2plY3QuYWRkTmV3UHJvamVjdCgnc2Vjb25kIHRlc3QgcHJvamVjdCcsIDEpO1xuUHJvamVjdC5hZGROZXdUb2RvKCdzZWNvbmQgdGVzdCB0b2RvJywgMSk7XG5Qcm9qZWN0LmFkZE5ld1RvZG8oJ1lldCBhbm90aGVyIHRoaW5nIHRvIGRvJywgMSk7XG5jb25zb2xlLmxvZyhwcm9qZWN0cyk7XG5cblxuXG5wYWdlTG9hZGVyKCk7XG4iXSwibmFtZXMiOlsicHJvamVjdHMiLCJQcm9qZWN0IiwiY29uc3RydWN0b3IiLCJuYW1lIiwicHJvamVjdEluZGV4IiwidGhpcyIsInRvZG9zIiwiYWRkTmV3VG9kbyIsInRpdGxlIiwiZHVlRGF0ZSIsInRvZG8iLCJjb21wbGV0ZWQiLCJwdXNoIiwicHJvamVjdERlbGV0ZXIiLCJzcGxpY2UiLCJhZGROZXdQcm9qZWN0IiwibWFya1RvZG9Db21wbGV0ZVRvZ2dsZSIsInRvZG9JbmRleCIsInRvZG9EYXRlRWRpdG9yIiwibmV3RGF0ZSIsInRvZG9EZWxldGVyIiwiYWN0aXZlUHJvamVjdEluZGV4IiwicHJvamVjdExpc3RDb250YWluZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJuZXdQcm9qZWN0QnV0dG9uIiwicHJvamVjdElucHV0IiwicHJvamVjdExpc3QiLCJ0b2RvQ29udGFpbmVyIiwibmV3VG9kb0J1dHRvbiIsIm5ld1RvZG9JbnB1dCIsIm5ld1RvZG9EYXRlIiwiZGVsZXRlQWxsQ29tcGxldGVCdXR0b24iLCJjbGVhckVsZW1lbnQiLCJlbGVtZW50IiwiZmlyc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwiZWxlbWVudEJ1aWxkZXIiLCJjbGFzc0xpc3QiLCJ0ZXh0Q29udGVudCIsImRhdGFOYW1lIiwieGVsZW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiZm9yRWFjaCIsImNsYXNzTGFiZWwiLCJhZGQiLCJ2YWx1ZSIsImRhdGFzZXQiLCJwcm9qZWN0Q2FyZEJ1aWxkZXIiLCJwcm9qZWN0Q2FyZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwibmV3UHJvamVjdEluZGV4IiwidGFyZ2V0IiwicHJvamVjdElEIiwidG9kb0xpc3RCdWlsZGVyIiwiaSIsImxlbmd0aCIsIm5ld1RvZG9DYXJkIiwidG9kb0NhcmRCdWlsZGVyIiwidG9kb0lEIiwiYXBwZW5kIiwidG9kb0NhcmQiLCJjb21wbGV0ZSIsInBhcmVudE5vZGUiLCJ0b2dnbGUiLCJjb25zb2xlIiwibG9nIiwidG9kb1RpdGxlIiwidG9kb0RhdGVIb2xkZXIiLCJ0b2RvRHVlRGF0ZSIsInRvZG9EdWVEYXRlUGlja2VyIiwic2V0QXR0cmlidXRlIiwibmV3RHVlRGF0ZSIsImZvY3VzIiwicGFnZUxvYWRlciIsIm5ld1Byb2plY3RDYXJkIiwicHJvamVjdExpc3RCdWlsZGVyIiwicHJldmVudERlZmF1bHQiXSwic291cmNlUm9vdCI6IiJ9