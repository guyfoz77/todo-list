(()=>{"use strict";let e=[];class t{constructor(e,t){this.name=e,this.projectIndex=t,this.todos=[]}static addNewTodo(t,o,d=""){const n={title:t,projectIndex:o,completed:!1,dueDate:d};e[o].todos.push(n)}static projectDeleter(t){e.splice(t,1)}static addNewProject(o,d){e.push(new t(o,d))}todoDateEditor(e,t){this.todos[e].dueDate=t}todoDeleter(e){this.todos.splice(e,1)}}let o=0;const d=document.querySelector(".projectList"),n=document.querySelector(".newProjectButton"),a=document.querySelector(".newProjectInput"),r=document.querySelector(".projectList"),c=document.querySelector(".todoList"),s=document.querySelector(".newTodoButton"),l=document.querySelector(".newTodoInput"),u=document.querySelector(".newTodoDate");function i(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function p(e,t,o,d){const n=document.createElement(e);return""!=t&&("object"==typeof t?t.forEach((e=>{n.classList.add(e)})):n.classList.add(t)),""!=o&&(n.value=o,n.textContent=o),""!=d&&(n.dataset.element=d),n}function v(e){let t=p("div","projectCard",e,"");return t.addEventListener("click",(e=>{var t;t=e.target.dataset.projectID,o=t,h(o)})),t}function h(t){i(c);for(let o=0;o<e[t].todos.length;o++){let d=f(e[t].todos[o].title,e[t].todos[o].dueDate);d.dataset.projectID=t,d.dataset.todoID=o,c.append(d)}}function f(t,o){let d=p("div","todoCard","",""),n=p("div","completeButton","","");n.addEventListener("click",(()=>{d.classList.add("complete")}));let a=p("h2","",t,""),r=p("div","dateHolder","",""),c=p("h3","","","");c.textContent=""==o?"No due date":`Due ${o}`,r.append(c);let s=p("input","","","");return s.setAttribute("type","date"),s.value=""==o?"":o,s.addEventListener("blur",(t=>{const o=t.target.parentNode.parentNode.dataset.projectID,d=t.target.parentNode.parentNode.dataset.todoID;let n=s.value;e[o].todoDateEditor(d,n),""!=n&&(c.textContent="",c.textContent=`Due ${n}`),r.removeChild(r.firstChild),r.append(c)})),c.addEventListener("click",(()=>{r.removeChild(r.firstChild),r.append(s),s.focus()})),d.append(n,a,r),d}function j(){!function(){i(d);for(let t=0;t<e.length;t++){let o=v(e[t].name);o.dataset.projectID=t,d.append(o)}}(),h(o)}n.addEventListener("click",(e=>{e.preventDefault(),""!=a.value&&(i(r),t.addNewProject(a.value),j(),a.value="")})),s.addEventListener("click",(e=>{e.preventDefault(),t.addNewTodo(l.value,o,u.value),j(),l.value="",u.value=""})),t.addNewProject("test project",0),t.addNewTodo("Test todo",0),t.addNewTodo("another test todo",0),t.addNewProject("second test project",1),t.addNewTodo("second test todo",1),t.addNewTodo("Yet another thing to do",1),console.log(e),j()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoibUJBQU8sSUFBSUEsRUFBVyxHQ0VmLE1BQU1DLEVBQ1QsV0FBQUMsQ0FBWUMsRUFBTUMsR0FDZEMsS0FBS0YsS0FBT0EsRUFDWkUsS0FBS0QsYUFBZUEsRUFDcEJDLEtBQUtDLE1BQVEsRUFDakIsQ0FFQSxpQkFBT0MsQ0FBV0MsRUFBT0osRUFBY0ssRUFBVSxJQUM3QyxNQUFNQyxFQUFPLENBQ1RGLE1BQU9BLEVBQ1BKLGFBQWNBLEVBRWRPLFdBQVcsRUFDWEYsUUFBU0EsR0FFYlQsRUFBU0ksR0FBY0UsTUFBTU0sS0FBS0YsRUFDdEMsQ0FFQSxxQkFBT0csQ0FBZVQsR0FDbEJKLEVBQVNjLE9BQU9WLEVBQWMsRUFDbEMsQ0FFQSxvQkFBT1csQ0FBY1osRUFBTUMsR0FDdkJKLEVBQVNZLEtBQUssSUFBSVgsRUFBUUUsRUFBTUMsR0FDcEMsQ0FFQSxjQUFBWSxDQUFlQyxFQUFXQyxHQUN0QmIsS0FBS0MsTUFBTVcsR0FBV1IsUUFBVVMsQ0FDcEMsQ0FFQSxXQUFBQyxDQUFZRixHQUNSWixLQUFLQyxNQUFNUSxPQUFPRyxFQUFXLEVBQ2pDLEVDOUJHLElBQUlHLEVBQXFCLEVBQ2hDLE1BQU1DLEVBQXVCQyxTQUFTQyxjQUFjLGdCQUM5Q0MsRUFBbUJGLFNBQVNDLGNBQWMscUJBQ3RDRSxFQUFlSCxTQUFTQyxjQUFjLG9CQUMxQ0csRUFBY0osU0FBU0MsY0FBYyxnQkFDckNJLEVBQWdCTCxTQUFTQyxjQUFjLGFBQ3ZDSyxFQUFnQk4sU0FBU0MsY0FBYyxrQkFDbkNNLEVBQWVQLFNBQVNDLGNBQWMsaUJBQ3RDTyxFQUFjUixTQUFTQyxjQUFjLGdCQW1CeEMsU0FBU1EsRUFBYUMsR0FDekIsS0FBT0EsRUFBUUMsWUFDWEQsRUFBUUUsWUFBWUYsRUFBUUMsV0FFcEMsQ0FFTyxTQUFTRSxFQUFlSCxFQUFTSSxFQUFXQyxFQUFhQyxHQUM1RCxNQUFNQyxFQUFXakIsU0FBU2tCLGNBQWNSLEdBYXhDLE1BWmlCLElBQWJJLElBQ3dCLGlCQUFiQSxFQUNQQSxFQUFVSyxTQUFRQyxJQUNkSCxFQUFTSCxVQUFVTyxJQUFJRCxFQUFXLElBRW5DSCxFQUFTSCxVQUFVTyxJQUFJUCxJQUVmLElBQWZDLElBQ0FFLEVBQVNLLE1BQVFQLEVBQ2pCRSxFQUFTRixZQUFjQSxHQUVYLElBQVpDLElBQWdCQyxFQUFTTSxRQUFRYixRQUFVTSxHQUN4Q0MsQ0FDWCxDQUVBLFNBQVNPLEVBQW1CM0MsR0FDeEIsSUFBSTRDLEVBQWNaLEVBQWUsTUFBTyxjQUFlaEMsRUFBTSxJQUk3RCxPQUhBNEMsRUFBWUMsaUJBQWlCLFNBQVNDLElBZTFDLElBQStCQyxJQWRERCxFQUFFRSxPQUFPTixRQUFRTyxVQWUzQ2hDLEVBQXFCOEIsRUFDckJHLEVBQWdCakMsRUFoQnFDLElBRTlDMkIsQ0FDWCxDQWdCTyxTQUFTTSxFQUFnQmpDLEdBQzVCVyxFQUFhSixHQUNiLElBQUssSUFBSTJCLEVBQUksRUFBR0EsRUFBSXRELEVBQVNvQixHQUFvQmQsTUFBTWlELE9BQVFELElBQUssQ0FDaEUsSUFBSUUsRUFBY0MsRUFBZ0J6RCxFQUFTb0IsR0FBb0JkLE1BQU1nRCxHQUFHOUMsTUFBT1IsRUFBU29CLEdBQW9CZCxNQUFNZ0QsR0FBRzdDLFNBQ3JIK0MsRUFBWVgsUUFBUU8sVUFBWWhDLEVBQ2hDb0MsRUFBWVgsUUFBUWEsT0FBU0osRUFDN0IzQixFQUFjZ0MsT0FBT0gsRUFDekIsQ0FDSixDQUVPLFNBQVNDLEVBQWdCakQsRUFBT0MsR0FDbkMsSUFBSW1ELEVBQVd6QixFQUFlLE1BQU8sV0FBWSxHQUFJLElBQ2pEMEIsRUFBVzFCLEVBQWUsTUFBTyxpQkFBa0IsR0FBSSxJQUN2RDBCLEVBQVNiLGlCQUFpQixTQUFTLEtBQy9CWSxFQUFTeEIsVUFBVU8sSUFBSSxXQUFXLElBRTFDLElBQUltQixFQUFZM0IsRUFBZSxLQUFNLEdBQUkzQixFQUFPLElBQzVDdUQsRUFBaUI1QixFQUFlLE1BQU8sYUFBYyxHQUFJLElBQ3pENkIsRUFBYzdCLEVBQWUsS0FBTSxHQUFJLEdBQUksSUFFdkM2QixFQUFZM0IsWUFERCxJQUFYNUIsRUFDMEIsY0FDRyxPQUFPQSxJQUM1Q3NELEVBQWVKLE9BQU9LLEdBQ3RCLElBQUlDLEVBQW9COUIsRUFBZSxRQUFTLEdBQUksR0FBSSxJQXlCeEQsT0F4Qkk4QixFQUFrQkMsYUFBYSxPQUFRLFFBRW5DRCxFQUFrQnJCLE1BRFAsSUFBWG5DLEVBQzBCLEdBQ0dBLEVBQzdCd0QsRUFBa0JqQixpQkFBaUIsUUFBU0MsSUFDeEMsTUFBTUcsRUFBWUgsRUFBRUUsT0FBT2dCLFdBQVdBLFdBQVd0QixRQUFRTyxVQUNuRE0sRUFBU1QsRUFBRUUsT0FBT2dCLFdBQVdBLFdBQVd0QixRQUFRYSxPQUN0RCxJQUFJVSxFQUFhSCxFQUFrQnJCLE1BQ25DNUMsRUFBU29ELEdBQVdwQyxlQUFlMEMsRUFBUVUsR0FDekIsSUFBZEEsSUFDQUosRUFBWTNCLFlBQWMsR0FDMUIyQixFQUFZM0IsWUFBYyxPQUFPK0IsS0FFckNMLEVBQWU3QixZQUFZNkIsRUFBZTlCLFlBQzFDOEIsRUFBZUosT0FBT0ssRUFBWSxJQUUxQ0EsRUFBWWhCLGlCQUFpQixTQUFTLEtBQ2xDZSxFQUFlN0IsWUFBWTZCLEVBQWU5QixZQUMxQzhCLEVBQWVKLE9BQU9NLEdBQ3RCQSxFQUFrQkksT0FBTyxJQUlqQ1QsRUFBU0QsT0FBT0UsRUFBVUMsRUFBV0MsR0FDOUJILENBQ1gsQ0N6SE8sU0FBU1UsS0QwRFQsV0FDSHZDLEVBQWFWLEdBQ2IsSUFBSyxJQUFJaUMsRUFBSSxFQUFHQSxFQUFJdEQsRUFBU3VELE9BQVFELElBQUssQ0FDdEMsSUFBSWlCLEVBQWlCekIsRUFBbUI5QyxFQUFTc0QsR0FBR25ELE1BQ3BEb0UsRUFBZTFCLFFBQVFPLFVBQVlFLEVBQ25DakMsRUFBcUJzQyxPQUFPWSxFQUNoQyxDQUNKLENDaEVJQyxHQUNBbkIsRUFBZ0JqQyxFQUNwQixDRE9BSSxFQUFpQndCLGlCQUFpQixTQUFTQyxJQUN2Q0EsRUFBRXdCLGlCQUN3QixJQUF0QmhELEVBQWFtQixRQUNqQmIsRUFBYUwsR0FDYnpCLEVBQVFjLGNBQWNVLEVBQWFtQixPQUNuQzBCLElBQ0E3QyxFQUFhbUIsTUFBUSxHQUFFLElBRTNCaEIsRUFBY29CLGlCQUFpQixTQUFTQyxJQUNwQ0EsRUFBRXdCLGlCQUNGeEUsRUFBUU0sV0FBV3NCLEVBQWFlLE1BQU94QixFQUFvQlUsRUFBWWMsT0FDdkUwQixJQUNBekMsRUFBYWUsTUFBUSxHQUNyQmQsRUFBWWMsTUFBUSxFQUFFLElFdkIxQjNDLEVBQVFjLGNBQWMsZUFBZ0IsR0FDdENkLEVBQVFNLFdBQVcsWUFBYSxHQUNoQ04sRUFBUU0sV0FBVyxvQkFBcUIsR0FDeENOLEVBQVFjLGNBQWMsc0JBQXVCLEdBQzdDZCxFQUFRTSxXQUFXLG1CQUFvQixHQUN2Q04sRUFBUU0sV0FBVywwQkFBMkIsR0FDOUNtRSxRQUFRQyxJQUFJM0UsR0FJWnNFLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvcHJvamVjdFN0b3JhZ2UuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL3Byb2plY3RNYW5hZ2VyLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9kb21Db250cm9sbGVyLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9wYWdlTG9hZGVyLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgbGV0IHByb2plY3RzID0gW107IiwiaW1wb3J0IHsgcHJvamVjdHMgfSBmcm9tIFwiLi9wcm9qZWN0U3RvcmFnZVwiO1xuXG5leHBvcnQgY2xhc3MgUHJvamVjdCB7XG4gICAgY29uc3RydWN0b3IobmFtZSwgcHJvamVjdEluZGV4KSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMucHJvamVjdEluZGV4ID0gcHJvamVjdEluZGV4O1xuICAgICAgICB0aGlzLnRvZG9zID0gW107XG4gICAgfVxuXG4gICAgc3RhdGljIGFkZE5ld1RvZG8odGl0bGUsIHByb2plY3RJbmRleCwgZHVlRGF0ZSA9ICcnKSB7XG4gICAgICAgIGNvbnN0IHRvZG8gPSB7XG4gICAgICAgICAgICB0aXRsZTogdGl0bGUsXG4gICAgICAgICAgICBwcm9qZWN0SW5kZXg6IHByb2plY3RJbmRleCxcbiAgICAgICAgICAgIC8vIHRvZG9JbmRleDogdG9kb0luZGV4LFxuICAgICAgICAgICAgY29tcGxldGVkOiBmYWxzZSxcbiAgICAgICAgICAgIGR1ZURhdGU6IGR1ZURhdGVcbiAgICAgICAgfVxuICAgICAgICBwcm9qZWN0c1twcm9qZWN0SW5kZXhdLnRvZG9zLnB1c2godG9kbyk7XG4gICAgfVxuXG4gICAgc3RhdGljIHByb2plY3REZWxldGVyKHByb2plY3RJbmRleCkge1xuICAgICAgICBwcm9qZWN0cy5zcGxpY2UocHJvamVjdEluZGV4LCAxKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgYWRkTmV3UHJvamVjdChuYW1lLCBwcm9qZWN0SW5kZXgpIHtcbiAgICAgICAgcHJvamVjdHMucHVzaChuZXcgUHJvamVjdChuYW1lLCBwcm9qZWN0SW5kZXgpKTtcbiAgICB9XG5cbiAgICB0b2RvRGF0ZUVkaXRvcih0b2RvSW5kZXgsIG5ld0RhdGUpIHtcbiAgICAgICAgdGhpcy50b2Rvc1t0b2RvSW5kZXhdLmR1ZURhdGUgPSBuZXdEYXRlO1xuICAgIH1cblxuICAgIHRvZG9EZWxldGVyKHRvZG9JbmRleCkge1xuICAgICAgICB0aGlzLnRvZG9zLnNwbGljZSh0b2RvSW5kZXgsIDEpO1xuICAgIH1cbn1cblxuLy8gZnVuY3Rpb24gcHJvamVjdEJ1aWxkZXIobmFtZSwgcHJvamVjdEluZGV4KSB7IC8vZmFjdG9yeSBmdW5jdGlvbiB0byBidWlsZCBuZXcgcHJvamVjdCBvYmplY3QuXG4vLyAgICAgbGV0IHRvZG9zID0gW107XG4vLyAgICAgZnVuY3Rpb24gdG9kb0RhdGVFZGl0b3IodG9kb0luZGV4LCBuZXdEYXRlKSB7XG4vLyAgICAgICAgIHRoaXMudG9kb3NbdG9kb0luZGV4XS5kdWVEYXRlID0gbmV3RGF0ZTtcbi8vICAgICB9XG4vLyAgICAgZnVuY3Rpb24gdG9kb0RlbGV0ZXIodG9kb0lEKXtcbi8vICAgICAgICAgdGhpcy50b2Rvcy5zcGxpY2UodG9kb0lELCAxKTtcbi8vICAgICB9XG4vLyAgICAgcmV0dXJuIHtcbi8vICAgICAgICAgbmFtZTogbmFtZSxcbi8vICAgICAgICAgcHJvamVjdEluZGV4OiBwcm9qZWN0SW5kZXgsXG4vLyAgICAgICAgIHRvZG9zOiB0b2Rvcyxcbi8vICAgICAgICAgdG9kb0RhdGVFZGl0b3I6IHRvZG9EYXRlRWRpdG9yLFxuLy8gICAgICAgICB0b2RvRGVsZXRlcjogdG9kb0RlbGV0ZXJcbi8vICAgICB9XG4vLyB9XG4vLyBmdW5jdGlvbiB0b2RvQnVpbGRlcih0aXRsZSwgcHJvamVjdEluZGV4LCB0b2RvSW5kZXgsIGR1ZURhdGUgPSAnTm8gZHVlIGRhdGUuJykgeyAvL3Byb2plY3RJbmRleCByZWZlcnMgdG8gdGhlIHBvc2l0aW9uIG9mIHRoZSBwYXJlbnQgcHJvamVjdCBpbiB0aGUgYXJyYXkgb2YgcHJvamVjdHMuXG4vLyAgICAgcmV0dXJuIHtcbi8vICAgICAgICAgdGl0bGU6IHRpdGxlLFxuLy8gICAgICAgICBwcm9qZWN0SW5kZXg6IHByb2plY3RJbmRleCxcbi8vICAgICAgICAgdG9kb0luZGV4OiB0b2RvSW5kZXgsXG4vLyAgICAgICAgIGNvbXBsZXRlZDogZmFsc2UsXG4vLyAgICAgICAgIGR1ZURhdGU6IGR1ZURhdGVcbi8vICAgICB9XG4vLyB9XG4vLyBleHBvcnQgZnVuY3Rpb24gcHJvamVjdERlbGV0ZXIocHJvamVjdEluZGV4KSB7XG4vLyAgICAgUHJvamVjdC5wcm9qZWN0cy5zcGxpY2UocHJvamVjdEluZGV4LCAxKTtcbi8vIH1cblxuLy8gZXhwb3J0IGZ1bmN0aW9uIGFkZE5ld1Byb2plY3QobmFtZSwgcHJvamVjdEluZGV4KSB7XG4vLyAgICAgcHJvamVjdHMucHVzaChuZXcgUHJvamVjdChuYW1lLCBwcm9qZWN0SW5kZXgpKTtcbi8vIH1cbi8vIGV4cG9ydCBmdW5jdGlvbiBhZGROZXdUb2RvKHRpdGxlLCBwcm9qZWN0SW5kZXgsIHRvZG9JbmRleCwgZHVlRGF0ZSA9ICdObyBkdWUgZGF0ZS4nKSB7XG4vLyAgICAgUHJvamVjdC5wcm9qZWN0c1twcm9qZWN0SW5kZXhdLnRvZG9zLnB1c2godG9kb0J1aWxkZXIodGl0bGUsIHByb2plY3RJbmRleCwgdG9kb0luZGV4LCBkdWVEYXRlKSk7XG4vLyB9IiwiaW1wb3J0IHsgUHJvamVjdCB9IGZyb20gXCIuL3Byb2plY3RNYW5hZ2VyXCI7XG5pbXBvcnQgeyBwcm9qZWN0cyB9IGZyb20gXCIuL3Byb2plY3RTdG9yYWdlXCI7XG5pbXBvcnQgeyBwYWdlTG9hZGVyIH0gZnJvbSBcIi4vcGFnZUxvYWRlclwiO1xuXG5leHBvcnQgbGV0IGFjdGl2ZVByb2plY3RJbmRleCA9IDA7XG5jb25zdCBwcm9qZWN0TGlzdENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0TGlzdCcpO1xuY29uc3QgbmV3UHJvamVjdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uZXdQcm9qZWN0QnV0dG9uJyk7XG4gICAgY29uc3QgcHJvamVjdElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5ld1Byb2plY3RJbnB1dCcpO1xuY29uc3QgcHJvamVjdExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdExpc3QnKTtcbmNvbnN0IHRvZG9Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9kb0xpc3QnKTtcbmNvbnN0IG5ld1RvZG9CdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmV3VG9kb0J1dHRvbicpO1xuICAgIGNvbnN0IG5ld1RvZG9JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uZXdUb2RvSW5wdXQnKTtcbiAgICBjb25zdCBuZXdUb2RvRGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uZXdUb2RvRGF0ZScpO1xuXG5uZXdQcm9qZWN0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7IC8vd2lsbCBuZWVkIHRvIHJld29yayB0aGlzIHRvIGFkZCB0byBzdG9yYWdlIGFycmF5IHJhdGhlciB0aGFuIGRpcmVjdGx5IHRvIERPTVxuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBpZiAocHJvamVjdElucHV0LnZhbHVlID09ICcnIHx8IG51bGwpIHJldHVybjtcbiAgICBjbGVhckVsZW1lbnQocHJvamVjdExpc3QpO1xuICAgIFByb2plY3QuYWRkTmV3UHJvamVjdChwcm9qZWN0SW5wdXQudmFsdWUpO1xuICAgIHBhZ2VMb2FkZXIoKTtcbiAgICBwcm9qZWN0SW5wdXQudmFsdWUgPSAnJztcbn0pXG5uZXdUb2RvQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIFByb2plY3QuYWRkTmV3VG9kbyhuZXdUb2RvSW5wdXQudmFsdWUsIGFjdGl2ZVByb2plY3RJbmRleCwgbmV3VG9kb0RhdGUudmFsdWUpO1xuICAgIHBhZ2VMb2FkZXIoKTtcbiAgICBuZXdUb2RvSW5wdXQudmFsdWUgPSAnJztcbiAgICBuZXdUb2RvRGF0ZS52YWx1ZSA9ICcnO1xufSlcblxuXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJFbGVtZW50KGVsZW1lbnQpIHtcbiAgICB3aGlsZSAoZWxlbWVudC5maXJzdENoaWxkKSB7XG4gICAgICAgIGVsZW1lbnQucmVtb3ZlQ2hpbGQoZWxlbWVudC5maXJzdENoaWxkKTtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlbGVtZW50QnVpbGRlcihlbGVtZW50LCBjbGFzc0xpc3QsIHRleHRDb250ZW50LCBkYXRhTmFtZSkgeyAgLy9lbGVtZW50IGJ1aWxkZXIgY29waWVkIGFuZCBtb2RpZmllZCBmcm9tIHByZXZpb3VzIHByb2plY3QuXG4gICAgY29uc3QgeGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGVsZW1lbnQpO1xuICAgIGlmIChjbGFzc0xpc3QgIT0gJycpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGFzc0xpc3QgPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGNsYXNzTGlzdC5mb3JFYWNoKGNsYXNzTGFiZWwgPT4ge1xuICAgICAgICAgICAgICAgIHhlbGVtZW50LmNsYXNzTGlzdC5hZGQoY2xhc3NMYWJlbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHhlbGVtZW50LmNsYXNzTGlzdC5hZGQoY2xhc3NMaXN0KTtcbiAgICB9XG4gICAgaWYgKHRleHRDb250ZW50ICE9ICcnKSB7XG4gICAgICAgIHhlbGVtZW50LnZhbHVlID0gdGV4dENvbnRlbnQ7XG4gICAgICAgIHhlbGVtZW50LnRleHRDb250ZW50ID0gdGV4dENvbnRlbnQ7XG4gICAgfVxuICAgIGlmIChkYXRhTmFtZSAhPSAnJykgeGVsZW1lbnQuZGF0YXNldC5lbGVtZW50ID0gZGF0YU5hbWU7XG4gICAgcmV0dXJuIHhlbGVtZW50O1xufVxuXG5mdW5jdGlvbiBwcm9qZWN0Q2FyZEJ1aWxkZXIobmFtZSkge1xuICAgIGxldCBwcm9qZWN0Q2FyZCA9IGVsZW1lbnRCdWlsZGVyKCdkaXYnLCAncHJvamVjdENhcmQnLCBuYW1lLCAnJyk7XG4gICAgcHJvamVjdENhcmQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICAgICAgYWN0aXZlUHJvamVjdFN3aXRjaGVyKGUudGFyZ2V0LmRhdGFzZXQucHJvamVjdElEKTtcbiAgICB9KVxuICAgIHJldHVybiBwcm9qZWN0Q2FyZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHByb2plY3RMaXN0QnVpbGRlcigpIHtcbiAgICBjbGVhckVsZW1lbnQocHJvamVjdExpc3RDb250YWluZXIpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvamVjdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IG5ld1Byb2plY3RDYXJkID0gcHJvamVjdENhcmRCdWlsZGVyKHByb2plY3RzW2ldLm5hbWUpO1xuICAgICAgICBuZXdQcm9qZWN0Q2FyZC5kYXRhc2V0LnByb2plY3RJRCA9IGk7XG4gICAgICAgIHByb2plY3RMaXN0Q29udGFpbmVyLmFwcGVuZChuZXdQcm9qZWN0Q2FyZCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBhY3RpdmVQcm9qZWN0U3dpdGNoZXIobmV3UHJvamVjdEluZGV4KSB7XG4gICAgYWN0aXZlUHJvamVjdEluZGV4ID0gbmV3UHJvamVjdEluZGV4O1xuICAgIHRvZG9MaXN0QnVpbGRlcihhY3RpdmVQcm9qZWN0SW5kZXgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdG9kb0xpc3RCdWlsZGVyKGFjdGl2ZVByb2plY3RJbmRleCkge1xuICAgIGNsZWFyRWxlbWVudCh0b2RvQ29udGFpbmVyKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByb2plY3RzW2FjdGl2ZVByb2plY3RJbmRleF0udG9kb3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IG5ld1RvZG9DYXJkID0gdG9kb0NhcmRCdWlsZGVyKHByb2plY3RzW2FjdGl2ZVByb2plY3RJbmRleF0udG9kb3NbaV0udGl0bGUsIHByb2plY3RzW2FjdGl2ZVByb2plY3RJbmRleF0udG9kb3NbaV0uZHVlRGF0ZSk7XG4gICAgICAgIG5ld1RvZG9DYXJkLmRhdGFzZXQucHJvamVjdElEID0gYWN0aXZlUHJvamVjdEluZGV4O1xuICAgICAgICBuZXdUb2RvQ2FyZC5kYXRhc2V0LnRvZG9JRCA9IGk7XG4gICAgICAgIHRvZG9Db250YWluZXIuYXBwZW5kKG5ld1RvZG9DYXJkKTtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0b2RvQ2FyZEJ1aWxkZXIodGl0bGUsIGR1ZURhdGUpIHsgXG4gICAgbGV0IHRvZG9DYXJkID0gZWxlbWVudEJ1aWxkZXIoJ2RpdicsICd0b2RvQ2FyZCcsICcnLCAnJyk7XG4gICAgbGV0IGNvbXBsZXRlID0gZWxlbWVudEJ1aWxkZXIoJ2RpdicsICdjb21wbGV0ZUJ1dHRvbicsICcnLCAnJyk7XG4gICAgICAgIGNvbXBsZXRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdG9kb0NhcmQuY2xhc3NMaXN0LmFkZCgnY29tcGxldGUnKTtcbiAgICAgICAgfSlcbiAgICBsZXQgdG9kb1RpdGxlID0gZWxlbWVudEJ1aWxkZXIoJ2gyJywgJycsIHRpdGxlLCAnJyk7XG4gICAgbGV0IHRvZG9EYXRlSG9sZGVyID0gZWxlbWVudEJ1aWxkZXIoJ2RpdicsICdkYXRlSG9sZGVyJywgJycsICcnKTtcbiAgICBsZXQgdG9kb0R1ZURhdGUgPSBlbGVtZW50QnVpbGRlcignaDMnLCAnJywgJycsICcnKTtcbiAgICAgICAgaWYgKGR1ZURhdGUgPT0gJycpIHtcbiAgICAgICAgICAgIHRvZG9EdWVEYXRlLnRleHRDb250ZW50ID0gJ05vIGR1ZSBkYXRlJ1xuICAgICAgICB9IGVsc2UgdG9kb0R1ZURhdGUudGV4dENvbnRlbnQgPSBgRHVlICR7ZHVlRGF0ZX1gO1xuICAgIHRvZG9EYXRlSG9sZGVyLmFwcGVuZCh0b2RvRHVlRGF0ZSk7XG4gICAgbGV0IHRvZG9EdWVEYXRlUGlja2VyID0gZWxlbWVudEJ1aWxkZXIoJ2lucHV0JywgJycsICcnLCAnJyk7XG4gICAgICAgIHRvZG9EdWVEYXRlUGlja2VyLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJkYXRlXCIpO1xuICAgICAgICBpZiAoZHVlRGF0ZSA9PSAnJykge1xuICAgICAgICAgICAgdG9kb0R1ZURhdGVQaWNrZXIudmFsdWUgPSAnJ1xuICAgICAgICB9IGVsc2UgdG9kb0R1ZURhdGVQaWNrZXIudmFsdWUgPSBkdWVEYXRlO1xuICAgICAgICAgICAgdG9kb0R1ZURhdGVQaWNrZXIuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJvamVjdElEID0gZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLmRhdGFzZXQucHJvamVjdElEO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvZG9JRCA9IGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5kYXRhc2V0LnRvZG9JRDtcbiAgICAgICAgICAgICAgICBsZXQgbmV3RHVlRGF0ZSA9IHRvZG9EdWVEYXRlUGlja2VyLnZhbHVlO1xuICAgICAgICAgICAgICAgIHByb2plY3RzW3Byb2plY3RJRF0udG9kb0RhdGVFZGl0b3IodG9kb0lELCBuZXdEdWVEYXRlKTtcbiAgICAgICAgICAgICAgICBpZiAobmV3RHVlRGF0ZSAhPSAnJykge1xuICAgICAgICAgICAgICAgICAgICB0b2RvRHVlRGF0ZS50ZXh0Q29udGVudCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB0b2RvRHVlRGF0ZS50ZXh0Q29udGVudCA9IGBEdWUgJHtuZXdEdWVEYXRlfWBcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRvZG9EYXRlSG9sZGVyLnJlbW92ZUNoaWxkKHRvZG9EYXRlSG9sZGVyLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgICAgIHRvZG9EYXRlSG9sZGVyLmFwcGVuZCh0b2RvRHVlRGF0ZSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB0b2RvRHVlRGF0ZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRvZG9EYXRlSG9sZGVyLnJlbW92ZUNoaWxkKHRvZG9EYXRlSG9sZGVyLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgdG9kb0RhdGVIb2xkZXIuYXBwZW5kKHRvZG9EdWVEYXRlUGlja2VyKTtcbiAgICAgICAgICAgIHRvZG9EdWVEYXRlUGlja2VyLmZvY3VzKCk7XG4gICAgICAgIH0pXG4gICAgICAgIFxuXG4gICAgdG9kb0NhcmQuYXBwZW5kKGNvbXBsZXRlLCB0b2RvVGl0bGUsIHRvZG9EYXRlSG9sZGVyKTtcbiAgICByZXR1cm4gdG9kb0NhcmQ7XG59XG4iLCJcbmltcG9ydCB7IHRvZG9MaXN0QnVpbGRlciwgcHJvamVjdExpc3RCdWlsZGVyIH0gZnJvbSBcIi4vZG9tQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgYWN0aXZlUHJvamVjdEluZGV4IH0gZnJvbSBcIi4vZG9tQ29udHJvbGxlclwiO1xuXG5leHBvcnQgZnVuY3Rpb24gcGFnZUxvYWRlcigpIHtcbiAgICBwcm9qZWN0TGlzdEJ1aWxkZXIoKTtcbiAgICB0b2RvTGlzdEJ1aWxkZXIoYWN0aXZlUHJvamVjdEluZGV4KTtcbn0iLCJpbXBvcnQgeyBQcm9qZWN0IH0gZnJvbSBcIi4vcHJvamVjdE1hbmFnZXJcIjtcbmltcG9ydCB7IHBhZ2VMb2FkZXIgfSBmcm9tIFwiLi9wYWdlTG9hZGVyXCI7XG5pbXBvcnQgeyBwcm9qZWN0cyB9IGZyb20gXCIuL3Byb2plY3RTdG9yYWdlXCI7XG5cblByb2plY3QuYWRkTmV3UHJvamVjdCgndGVzdCBwcm9qZWN0JywgMCk7XG5Qcm9qZWN0LmFkZE5ld1RvZG8oJ1Rlc3QgdG9kbycsIDApO1xuUHJvamVjdC5hZGROZXdUb2RvKCdhbm90aGVyIHRlc3QgdG9kbycsIDApO1xuUHJvamVjdC5hZGROZXdQcm9qZWN0KCdzZWNvbmQgdGVzdCBwcm9qZWN0JywgMSk7XG5Qcm9qZWN0LmFkZE5ld1RvZG8oJ3NlY29uZCB0ZXN0IHRvZG8nLCAxKTtcblByb2plY3QuYWRkTmV3VG9kbygnWWV0IGFub3RoZXIgdGhpbmcgdG8gZG8nLCAxKTtcbmNvbnNvbGUubG9nKHByb2plY3RzKTtcblxuXG5cbnBhZ2VMb2FkZXIoKTtcbiJdLCJuYW1lcyI6WyJwcm9qZWN0cyIsIlByb2plY3QiLCJjb25zdHJ1Y3RvciIsIm5hbWUiLCJwcm9qZWN0SW5kZXgiLCJ0aGlzIiwidG9kb3MiLCJhZGROZXdUb2RvIiwidGl0bGUiLCJkdWVEYXRlIiwidG9kbyIsImNvbXBsZXRlZCIsInB1c2giLCJwcm9qZWN0RGVsZXRlciIsInNwbGljZSIsImFkZE5ld1Byb2plY3QiLCJ0b2RvRGF0ZUVkaXRvciIsInRvZG9JbmRleCIsIm5ld0RhdGUiLCJ0b2RvRGVsZXRlciIsImFjdGl2ZVByb2plY3RJbmRleCIsInByb2plY3RMaXN0Q29udGFpbmVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwibmV3UHJvamVjdEJ1dHRvbiIsInByb2plY3RJbnB1dCIsInByb2plY3RMaXN0IiwidG9kb0NvbnRhaW5lciIsIm5ld1RvZG9CdXR0b24iLCJuZXdUb2RvSW5wdXQiLCJuZXdUb2RvRGF0ZSIsImNsZWFyRWxlbWVudCIsImVsZW1lbnQiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJlbGVtZW50QnVpbGRlciIsImNsYXNzTGlzdCIsInRleHRDb250ZW50IiwiZGF0YU5hbWUiLCJ4ZWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJmb3JFYWNoIiwiY2xhc3NMYWJlbCIsImFkZCIsInZhbHVlIiwiZGF0YXNldCIsInByb2plY3RDYXJkQnVpbGRlciIsInByb2plY3RDYXJkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJuZXdQcm9qZWN0SW5kZXgiLCJ0YXJnZXQiLCJwcm9qZWN0SUQiLCJ0b2RvTGlzdEJ1aWxkZXIiLCJpIiwibGVuZ3RoIiwibmV3VG9kb0NhcmQiLCJ0b2RvQ2FyZEJ1aWxkZXIiLCJ0b2RvSUQiLCJhcHBlbmQiLCJ0b2RvQ2FyZCIsImNvbXBsZXRlIiwidG9kb1RpdGxlIiwidG9kb0RhdGVIb2xkZXIiLCJ0b2RvRHVlRGF0ZSIsInRvZG9EdWVEYXRlUGlja2VyIiwic2V0QXR0cmlidXRlIiwicGFyZW50Tm9kZSIsIm5ld0R1ZURhdGUiLCJmb2N1cyIsInBhZ2VMb2FkZXIiLCJuZXdQcm9qZWN0Q2FyZCIsInByb2plY3RMaXN0QnVpbGRlciIsInByZXZlbnREZWZhdWx0IiwiY29uc29sZSIsImxvZyJdLCJzb3VyY2VSb290IjoiIn0=